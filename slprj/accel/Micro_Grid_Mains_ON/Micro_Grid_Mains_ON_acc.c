#include "Micro_Grid_Mains_ON_acc.h"
#include <stddef.h>
#include "rtwtypes.h"
#include "Micro_Grid_Mains_ON_acc_types.h"
#include "Micro_Grid_Mains_ON_acc_private.h"
#include "mwmathutil.h"
#include <string.h>
#include "rt_look.h"
#include "rt_look1d.h"
#include "simstruc_types.h"
#include <stdio.h>
#include "slexec_vm_simstruct_bridge.h"
#include "slexec_vm_zc_functions.h"
#include "slexec_vm_lookup_functions.h"
#include "slsv_diagnostic_codegen_c_api.h"
#include "simtarget/slSimTgtMdlrefSfcnBridge.h"
#include "simstruc.h"
#include "fixedpoint.h"
#define CodeFormat S-Function
#define AccDefine1 Accelerator_S-Function
#include "simtarget/slAccSfcnBridge.h"
#ifndef __RTW_UTFREE__  
extern void * utMalloc ( size_t ) ; extern void utFree ( void * ) ;
#endif
boolean_T Micro_Grid_Mains_ON_acc_rt_TDelayUpdateTailOrGrowBuf ( int_T *
bufSzPtr , int_T * tailPtr , int_T * headPtr , int_T * lastPtr , real_T
tMinusDelay , real_T * * uBufPtr , boolean_T isfixedbuf , boolean_T
istransportdelay , int_T * maxNewBufSzPtr ) { int_T testIdx ; int_T tail = *
tailPtr ; int_T bufSz = * bufSzPtr ; real_T * tBuf = * uBufPtr + bufSz ;
real_T * xBuf = ( NULL ) ; int_T numBuffer = 2 ; if ( istransportdelay ) {
numBuffer = 3 ; xBuf = * uBufPtr + 2 * bufSz ; } testIdx = ( tail < ( bufSz -
1 ) ) ? ( tail + 1 ) : 0 ; if ( ( tMinusDelay <= tBuf [ testIdx ] ) && !
isfixedbuf ) { int_T j ; real_T * tempT ; real_T * tempU ; real_T * tempX = ( NULL ) ; real_T * uBuf = * uBufPtr ; int_T newBufSz = bufSz + 1024 ; if ( newBufSz > * maxNewBufSzPtr ) { * maxNewBufSzPtr = newBufSz ; } tempU = ( real_T * ) utMalloc ( numBuffer * newBufSz * sizeof ( real_T ) ) ; if ( tempU == ( NULL ) ) { return ( false ) ; } tempT = tempU + newBufSz ; if ( istransportdelay ) tempX = tempT + newBufSz ; for ( j = tail ; j < bufSz ; j ++ ) { tempT [ j - tail ] = tBuf [ j ] ; tempU [ j - tail ] = uBuf [ j ] ; if ( istransportdelay ) tempX [ j - tail ] = xBuf [ j ] ; } for ( j = 0 ; j < tail ; j ++ ) { tempT [ j + bufSz - tail ] = tBuf [ j ] ; tempU [ j + bufSz - tail ] = uBuf [ j ] ; if ( istransportdelay ) tempX [ j + bufSz - tail ] = xBuf [ j ] ; } if ( * lastPtr > tail ) { * lastPtr -= tail ; } else { * lastPtr += ( bufSz - tail ) ; } * tailPtr = 0 ; * headPtr = bufSz ; utFree ( uBuf ) ; * bufSzPtr = newBufSz ; * uBufPtr = tempU ; } else { * tailPtr = testIdx ; } return ( true ) ; } real_T Micro_Grid_Mains_ON_acc_rt_VTDelayfindtDInterpolate ( real_T x , real_T * uBuf , int_T bufSz , int_T head , int_T tail , int_T * pLast , real_T t , real_T tStart , boolean_T discrete , boolean_T minorStepAndTAtLastMajorOutput , real_T initOutput , real_T * appliedDelay ) { int_T n , k ; real_T f ; int_T kp1 ; real_T tminustD = 0 ; real_T tL = 0 ; real_T tR = 0 ; real_T uL = 0 ; real_T uR = 0 ; real_T uD , fU ; real_T * tBuf = uBuf + bufSz ; real_T * xBuf = uBuf + 2 * bufSz ; if ( minorStepAndTAtLastMajorOutput ) { if ( * pLast == head ) { * pLast = ( * pLast == 0 ) ? bufSz - 1 : * pLast - 1 ; } head = ( head == 0 ) ? bufSz - 1 : head - 1 ; } if ( x <= 1 ) { return initOutput ; } k = * pLast ; n = 0 ; for ( ; ; ) { n ++ ; if ( n > bufSz ) break ; if ( x - xBuf [ k ] > 1.0 ) { if ( k == head ) { int_T km1 ; f = ( x - 1.0 - xBuf [ k ] ) / ( x - xBuf [ k ] ) ; tminustD = ( 1.0 - f ) * tBuf [ k ] + f * t ; km1 = k - 1 ; if ( km1 < 0 ) km1 = bufSz - 1 ; tL = tBuf [ km1 ] ; tR = tBuf [ k ] ; uL = uBuf [ km1 ] ; uR = uBuf [ k ] ; break ; } kp1 = k + 1 ; if ( kp1 == bufSz ) kp1 = 0 ; if ( x - xBuf [ kp1 ] <= 1.0 ) { f = ( x - 1.0 - xBuf [ k ] ) / ( xBuf [ kp1 ] - xBuf [ k ] ) ; tL = tBuf [ k ] ; tR = tBuf [ kp1 ] ; uL = uBuf [ k ] ; uR = uBuf [ kp1 ] ; tminustD = ( 1.0 - f ) * tL + f * tR ; break ; } k = kp1 ; } else { if ( k == tail ) { f = ( x - 1.0 ) / xBuf [ k ] ; if ( discrete ) { return ( uBuf [ tail ] ) ; } kp1 = k + 1 ; if ( kp1 == bufSz ) kp1 = 0 ; tminustD = ( 1 - f ) * tStart + f * tBuf [ k ] ; tL = tBuf [ k ] ; tR = tBuf [ kp1 ] ; uL = uBuf [ k ] ; uR = uBuf [ kp1 ] ; break ; } k = k - 1 ; if ( k < 0 ) k = bufSz - 1 ; } } * pLast = k ; if ( tR == tL ) { fU = 1.0 ; } else { fU = ( tminustD - tL ) / ( tR - tL ) ; } if ( discrete ) { uD = ( fU > ( 1.0 - fU ) ) ? uR : uL ; } else { uD = ( 1.0 - fU ) * uL + fU * uR ; } * appliedDelay = t - tminustD ; return uD ; } real_T look1_pbinlxpw ( real_T u0 , const real_T bp0 [ ] , const real_T table [ ] , uint32_T prevIndex [ ] , uint32_T maxIndex ) { real_T frac ; real_T yL_0d0 ; uint32_T bpIdx ; uint32_T found ; uint32_T iLeft ; uint32_T iRght ; if ( u0 <= bp0 [ 0U ] ) { bpIdx = 0U ; frac = ( u0 - bp0 [ 0U ] ) / ( bp0 [ 1U ] - bp0 [ 0U ] ) ; } else if ( u0 < bp0 [ maxIndex ] ) { bpIdx = prevIndex [ 0U ] ; iLeft = 0U ; iRght = maxIndex ; found = 0U ; while ( found == 0U ) { if ( u0 < bp0 [ bpIdx ] ) { iRght = bpIdx - 1U ; bpIdx = ( ( bpIdx + iLeft ) - 1U ) >> 1U ; } else if ( u0 < bp0 [ bpIdx + 1U ] ) { found = 1U ; } else { iLeft = bpIdx + 1U ; bpIdx = ( ( bpIdx + iRght ) + 1U ) >> 1U ; } } frac = ( u0 - bp0 [ bpIdx ] ) / ( bp0 [ bpIdx + 1U ] - bp0 [ bpIdx ] ) ; } else { bpIdx = maxIndex - 1U ; frac = ( u0 - bp0 [ maxIndex - 1U ] ) / ( bp0 [ maxIndex ] - bp0 [ maxIndex - 1U ] ) ; } prevIndex [ 0U ] = bpIdx ; yL_0d0 = table [ bpIdx ] ; return ( table [ bpIdx + 1U ] - yL_0d0 ) * frac + yL_0d0 ; } void rt_ssGetBlockPath ( void * S , int_T sysIdx , int_T blkIdx , char_T * * path ) { _ssGetBlockPath ( ( SimStruct * ) S , sysIdx , blkIdx , path ) ; } void rt_ssSet_slErrMsg ( void * S , void * diag ) { SimStruct * castedS = ( SimStruct * ) S ; if ( ! _ssIsErrorStatusAslErrMsg ( castedS ) ) { _ssSet_slErrMsg ( castedS , diag ) ; } else { _ssDiscardDiagnostic ( castedS , diag ) ; } } void rt_ssReportDiagnosticAsWarning ( void * S , void * diag ) { _ssReportDiagnosticAsWarning ( ( SimStruct * ) S , diag ) ; } void rt_ssReportDiagnosticAsInfo ( void * S , void * diag ) { _ssReportDiagnosticAsInfo ( ( SimStruct * ) S , diag ) ; } void Micro_Grid_Mains_ON_Subsystempi2delay_Init ( SimStruct * S , B_Subsystempi2delay_Micro_Grid_Mains_ON_T * localB , P_Subsystempi2delay_Micro_Grid_Mains_ON_T * localP ) { localB -> B_13_603_4672 = localP -> P_0 [ 0 ] ; localB -> B_13_604_4680 = localP -> P_0 [ 1 ] ; } void Micro_Grid_Mains_ON_Subsystempi2delay_Disable ( SimStruct * S , DW_Subsystempi2delay_Micro_Grid_Mains_ON_T * localDW ) { localDW -> Subsystempi2delay_MODE = false ; } void Micro_Grid_Mains_ON_Subsystempi2delay ( SimStruct * S , uint8_T rtu_Enable , const real_T rtu_alpha_beta [ 2 ] , real_T rtu_wt , B_Subsystempi2delay_Micro_Grid_Mains_ON_T * localB , DW_Subsystempi2delay_Micro_Grid_Mains_ON_T * localDW ) { int32_T isHit ; isHit = ssIsSampleHit ( S , 1 , 0 ) ; if ( ( isHit != 0 ) && ssIsModeUpdateTimeStep ( S ) ) { if ( rtu_Enable > 0 ) { if ( ! localDW -> Subsystempi2delay_MODE ) { if ( ssGetTaskTime ( S , 1 ) != ssGetTStart ( S ) ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } localDW -> Subsystempi2delay_MODE = true ; } } else if ( localDW -> Subsystempi2delay_MODE ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; Micro_Grid_Mains_ON_Subsystempi2delay_Disable ( S , localDW ) ; } } if ( localDW -> Subsystempi2delay_MODE ) { localB -> B_13_603_4672 = rtu_alpha_beta [ 0 ] * muDoubleScalarSin ( rtu_wt ) - rtu_alpha_beta [ 1 ] * muDoubleScalarCos ( rtu_wt ) ; localB -> B_13_604_4680 = rtu_alpha_beta [ 0 ] * muDoubleScalarCos ( rtu_wt ) + rtu_alpha_beta [ 1 ] * muDoubleScalarSin ( rtu_wt ) ; if ( ssIsModeUpdateTimeStep ( S ) ) { srUpdateBC ( localDW -> Subsystempi2delay_SubsysRanBC ) ; } } } void Micro_Grid_Mains_ON_Subsystempi2delay_Term ( SimStruct * const S ) { UNUSED_PARAMETER ( S ) ; } void Micro_Grid_Mains_ON_Subsystem1_Init ( SimStruct * S , B_Subsystem1_Micro_Grid_Mains_ON_T * localB , P_Subsystem1_Micro_Grid_Mains_ON_T * localP ) { localB -> B_14_601_4656 = localP -> P_0 [ 0 ] ; localB -> B_14_602_4664 = localP -> P_0 [ 1 ] ; } void Micro_Grid_Mains_ON_Subsystem1_Disable ( SimStruct * S , DW_Subsystem1_Micro_Grid_Mains_ON_T * localDW ) { localDW -> Subsystem1_MODE = false ; } void Micro_Grid_Mains_ON_Subsystem1 ( SimStruct * S , uint8_T rtu_Enable , const real_T rtu_alpha_beta [ 2 ] , real_T rtu_wt , B_Subsystem1_Micro_Grid_Mains_ON_T * localB , DW_Subsystem1_Micro_Grid_Mains_ON_T * localDW ) { int32_T isHit ; isHit = ssIsSampleHit ( S , 1 , 0 ) ; if ( ( isHit != 0 ) && ssIsModeUpdateTimeStep ( S ) ) { if ( rtu_Enable > 0 ) { if ( ! localDW -> Subsystem1_MODE ) { if ( ssGetTaskTime ( S , 1 ) != ssGetTStart ( S ) ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } localDW -> Subsystem1_MODE = true ; } } else if ( localDW -> Subsystem1_MODE ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; Micro_Grid_Mains_ON_Subsystem1_Disable ( S , localDW ) ; } } if ( localDW -> Subsystem1_MODE ) { localB -> B_14_601_4656 = rtu_alpha_beta [ 0 ] * muDoubleScalarCos ( rtu_wt ) + rtu_alpha_beta [ 1 ] * muDoubleScalarSin ( rtu_wt ) ; localB -> B_14_602_4664 = - rtu_alpha_beta [ 0 ] * muDoubleScalarSin ( rtu_wt ) + rtu_alpha_beta [ 1 ] * muDoubleScalarCos ( rtu_wt ) ; if ( ssIsModeUpdateTimeStep ( S ) ) { srUpdateBC ( localDW -> Subsystem1_SubsysRanBC ) ; } } } void Micro_Grid_Mains_ON_Subsystem1_Term ( SimStruct * const S ) { UNUSED_PARAMETER ( S ) ; } void rt_invd5x5_snf ( const real_T u [ 25 ] , real_T y [ 25 ] ) { real_T x [ 25 ] ; real_T s ; real_T smax ; int32_T c ; int32_T ijA ; int32_T ix ; int32_T iy ; int32_T jA ; int32_T jBcol ; int32_T jj ; int32_T jp1j ; int32_T pipk ; int8_T ipiv [ 5 ] ; int8_T p [ 5 ] ; int8_T p_0 ; for ( ix = 0 ; ix < 25 ; ix ++ ) { y [ ix ] = 0.0 ; x [ ix ] = u [ ix ] ; } for ( ix = 0 ; ix < 5 ; ix ++ ) { ipiv [ ix ] = ( int8_T ) ( ix + 1 ) ; } for ( pipk = 0 ; pipk < 4 ; pipk ++ ) { jBcol = pipk * 6 + 1 ; jj = pipk * 6 ; c = 5 - pipk ; iy = 0 ; smax = muDoubleScalarAbs ( x [ jj ] ) ; for ( jA = 2 ; jA <= c ; jA ++ ) { s = muDoubleScalarAbs ( x [ ( jBcol + jA ) - 2 ] ) ; if ( s > smax ) { iy = jA - 1 ; smax = s ; } } if ( x [ ( jBcol + iy ) - 1 ] != 0.0 ) { if ( iy != 0 ) { ipiv [ pipk ] = ( int8_T ) ( ( pipk + iy ) + 1 ) ; iy = ( pipk + iy ) + 1 ; for ( jA = 0 ; jA < 5 ; jA ++ ) { smax = x [ jA * 5 + pipk ] ; x [ pipk + jA * 5 ] = x [ ( jA * 5 + iy ) - 1 ] ; x [ ( iy + jA * 5 ) - 1 ] = smax ; } } iy = ( jBcol - pipk ) - 1 ; for ( ix = jBcol + 1 ; ix <= iy + 5 ; ix ++ ) { x [ ix - 1 ] /= x [ jj ] ; } } c = 3 - pipk ; jA = jj ; jj += 6 ; for ( jp1j = 0 ; jp1j <= c ; jp1j ++ ) { if ( x [ ( jp1j * 5 + jj ) - 1 ] != 0.0 ) { smax = - x [ ( jp1j * 5 + jj ) - 1 ] ; iy = jA + 7 ; ix = ( jA - pipk ) + 10 ; for ( ijA = iy ; ijA <= ix ; ijA ++ ) { x [ ijA - 1 ] += x [ ( ( ( jBcol + ijA ) - jA ) - 6 ) - 1 ] * smax ; } } jA += 5 ; } } for ( ix = 0 ; ix < 5 ; ix ++ ) { p [ ix ] = ( int8_T ) ( ix + 1 ) ; } if ( ipiv [ 0 ] > 1 ) { pipk = p [ ipiv [ 0 ] - 1 ] ; p [ ipiv [ 0 ] - 1 ] = p [ 0 ] ; p [ 0 ] = ( int8_T ) pipk ; } if ( ipiv [ 1 ] > 2 ) { pipk = p [ ipiv [ 1 ] - 1 ] ; p [ ipiv [ 1 ] - 1 ] = p [ 1 ] ; p [ 1 ] = ( int8_T ) pipk ; } if ( ipiv [ 2 ] > 3 ) { pipk = p [ ipiv [ 2 ] - 1 ] ; p [ ipiv [ 2 ] - 1 ] = p [ 2 ] ; p [ 2 ] = ( int8_T ) pipk ; } if ( ipiv [ 3 ] > 4 ) { pipk = p [ 4 ] ; p [ 4 ] = p [ 3 ] ; p [ 3 ] = ( int8_T ) pipk ; } for ( jA = 0 ; jA < 5 ; jA ++ ) { jj = jA + 1 ; p_0 = p [ jA ] ; y [ jA + 5 * ( p_0 - 1 ) ] = 1.0 ; for ( pipk = jj ; pipk < 6 ; pipk ++ ) { if ( y [ ( ( p_0 - 1 ) * 5 + pipk ) - 1 ] != 0.0 ) { for ( ix = pipk + 1 ; ix < 6 ; ix ++ ) { y [ ( ix + 5 * ( p_0 - 1 ) ) - 1 ] -= y [ ( ( p_0 - 1 ) * 5 + pipk ) - 1 ] * x [ ( ( pipk - 1 ) * 5 + ix ) - 1 ] ; } } } } for ( pipk = 0 ; pipk < 5 ; pipk ++ ) { jBcol = 5 * pipk ; for ( jA = 4 ; jA >= 0 ; jA -- ) { jj = 5 * jA ; if ( y [ jA + jBcol ] != 0.0 ) { y [ jA + jBcol ] /= x [ jA + jj ] ; for ( ix = 0 ; ix < jA ; ix ++ ) { y [ ix + jBcol ] -= x [ ix + jj ] * y [ jA + jBcol ] ; } } } } } static void mdlOutputs ( SimStruct * S , int_T tid ) { real_T B_25_722_5624 ; real_T B_25_724_5640 ; real_T B_25_725_5648 ; real_T B_25_746_5816 ; B_Micro_Grid_Mains_ON_T * _rtB ; DW_Micro_Grid_Mains_ON_T * _rtDW ; P_Micro_Grid_Mains_ON_T * _rtP ; PrevZCX_Micro_Grid_Mains_ON_T * _rtZCE ; X_Micro_Grid_Mains_ON_T * _rtX ; real_T B_5_1006_7896 [ 25 ] ; real_T rtb_B_4_860_6728 [ 25 ] ; real_T rtb_B_5_1006_7896 [ 25 ] ; real_T rtb_B_25_611_4736 [ 5 ] ; real_T rtb_B_25_937_7344 [ 5 ] ; real_T tmp [ 5 ] ; real_T rtb_B_4_934_7320 [ 3 ] ; real_T B_25_700_5448_idx_1 ; real_T B_3_885_6928_idx_0 ; real_T B_3_885_6928_idx_1 ; real_T rtb_B_25_609_4720 ; real_T rtb_B_25_610_4728 ; real_T rtb_B_25_643_4992 ; real_T rtb_B_3_887_6944 ; real_T rtb_B_3_890_6968 ; real_T rtb_B_4_852_6664 ; real_T rtb_B_4_855_6688 ; int32_T i ; int32_T i_0 ; int32_T i_1 ; boolean_T rtb_B_25_1063_8324 ; boolean_T rtb_B_25_1064_8325 ; _rtDW = ( ( DW_Micro_Grid_Mains_ON_T * ) ssGetRootDWork ( S ) ) ; _rtZCE = ( ( PrevZCX_Micro_Grid_Mains_ON_T * ) _ssGetPrevZCSigState ( S ) ) ; _rtX = ( ( X_Micro_Grid_Mains_ON_T * ) ssGetContStates ( S ) ) ; _rtP = ( ( P_Micro_Grid_Mains_ON_T * ) ssGetModelRtp ( S ) ) ; _rtB = ( ( B_Micro_Grid_Mains_ON_T * ) _ssGetModelBlockIO ( S ) ) ; i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { muDoubleScalarSinCos ( _rtDW -> Rotorangledthetae_DSTATE + _rtP -> P_61 * ssGetTaskTime ( S , 3 ) , & rtb_B_25_609_4720 , & rtb_B_25_610_4728 ) ; for ( i = 0 ; i < 5 ; i ++ ) { rtb_B_25_611_4736 [ i ] = _rtDW -> fluxes_DSTATE [ i ] ; } if ( _rtB -> B_25_255_2048 > 0.0 ) { i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { rtb_B_4_934_7320 [ 0 ] = _rtP -> P_13 [ 0 ] * rtb_B_25_611_4736 [ 1 ] ; rtb_B_4_934_7320 [ 1 ] = _rtP -> P_13 [ 1 ] * rtb_B_25_611_4736 [ 2 ] ; rtb_B_4_934_7320 [ 2 ] = _rtP -> P_13 [ 2 ] * rtb_B_25_611_4736 [ 3 ] ; rtb_B_4_852_6664 = ( rtb_B_4_934_7320 [ 0 ] + rtb_B_4_934_7320 [ 1 ] ) + rtb_B_4_934_7320 [ 2 ] ; rtb_B_4_934_7320 [ 0 ] = _rtB -> B_4_472_3784 [ 0 ] ; rtb_B_4_934_7320 [ 1 ] = _rtB -> B_4_472_3784 [ 1 ] ; rtb_B_4_934_7320 [ 2 ] = 1.0 / _rtDW -> Lmd_sat_DSTATE ; _rtB -> B_4_417_3344 = 1.0 / ( ( rtb_B_4_934_7320 [ 0 ] + rtb_B_4_934_7320 [ 1 ] ) + rtb_B_4_934_7320 [ 2 ] ) ; rtb_B_4_855_6688 = muDoubleScalarAbs ( rtb_B_4_852_6664 * _rtB -> B_4_417_3344 ) ; rtb_B_4_852_6664 = look1_pbinlxpw ( rtb_B_4_855_6688 , _rtP -> P_16 , _rtP -> P_15 , & _rtDW -> m_bpIndex_c , 9U ) ; if ( rtb_B_4_852_6664 != 0.0 ) { rtb_B_4_855_6688 /= rtb_B_4_852_6664 ; } else { rtb_B_4_855_6688 = _rtB -> B_4_471_3776 ; } _rtB -> B_4_418_3352 = _rtP -> P_17 * rtb_B_4_855_6688 ; if ( _rtB -> B_4_586_4556 ) { i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { _rtB -> B_3_551_4416 = 1.0 / ( ( ( _rtB -> B_3_554_4440 [ 0 ] + _rtB -> B_3_554_4440 [ 1 ] ) + _rtB -> B_3_554_4440 [ 2 ] ) + 1.0 / _rtDW -> Lmq_sat_DSTATE ) ; rtb_B_3_890_6968 = muDoubleScalarAbs ( ( _rtP -> P_2 [ 0 ] * rtb_B_25_611_4736 [ 0 ] + _rtP -> P_2 [ 1 ] * rtb_B_25_611_4736 [ 4 ] ) * _rtB -> B_3_551_4416 ) ; rtb_B_3_887_6944 = look1_pbinlxpw ( rtb_B_3_890_6968 , _rtP -> P_5 , _rtP -> P_4 , & _rtDW -> m_bpIndex_b , 9U ) ; if ( rtb_B_3_887_6944 != 0.0 ) { rtb_B_3_890_6968 /= rtb_B_3_887_6944 ; } else { rtb_B_3_890_6968 = _rtB -> B_3_553_4432 ; } _rtB -> B_3_552_4424 = _rtP -> P_6 * rtb_B_3_890_6968 ; } srUpdateBC ( _rtDW -> Lmq_sat_SubsysRanBC ) ; } if ( _rtB -> B_4_587_4557 ) { _rtB -> B_4_419_3360 = _rtB -> B_3_552_4424 ; } else { _rtB -> B_4_419_3360 = _rtB -> B_4_550_4408 ; } memcpy ( & rtb_B_4_860_6728 [ 0 ] , & _rtB -> B_4_474_3800 [ 0 ] , 25U * sizeof ( real_T ) ) ; rtb_B_4_860_6728 [ 0 ] = _rtB -> B_4_419_3360 ; rtb_B_4_860_6728 [ 4 ] = _rtB -> B_4_419_3360 ; rtb_B_4_860_6728 [ 20 ] = _rtB -> B_4_419_3360 ; rtb_B_4_860_6728 [ 24 ] = _rtB -> B_4_419_3360 ; for ( i = 0 ; i < 3 ; i ++ ) { rtb_B_4_860_6728 [ 5 * ( i + 1 ) + 1 ] = _rtB -> B_4_418_3352 ; rtb_B_4_860_6728 [ 5 * ( i + 1 ) + 2 ] = _rtB -> B_4_418_3352 ; rtb_B_4_860_6728 [ 5 * ( i + 1 ) + 3 ] = _rtB -> B_4_418_3352 ; } for ( i = 0 ; i < 25 ; i ++ ) { rtb_B_5_1006_7896 [ i ] = rtb_B_4_860_6728 [ i ] + _rtB -> B_4_499_4000 [ i ] ; } rt_invd5x5_snf ( rtb_B_5_1006_7896 , _rtB -> B_4_420_3368 ) ; for ( i = 0 ; i < 5 ; i ++ ) { for ( i_0 = 0 ; i_0 < 5 ; i_0 ++ ) { rtb_B_4_855_6688 = 0.0 ; for ( i_1 = 0 ; i_1 < 5 ; i_1 ++ ) { rtb_B_4_855_6688 += _rtB -> B_4_524_4200 [ 5 * i_1 + i_0 ] * _rtB -> B_4_420_3368 [ 5 * i + i_1 ] ; } _rtB -> B_4_445_3568 [ i_0 + 5 * i ] = rtb_B_4_855_6688 ; } } if ( _rtB -> B_4_588_4558 ) { _rtB -> B_4_470_3768 = _rtB -> B_3_551_4416 ; } else { _rtB -> B_4_470_3768 = _rtB -> B_4_549_4400 ; } } if ( ssIsModeUpdateTimeStep ( S ) ) { srUpdateBC ( _rtDW -> Saturation_SubsysRanBC ) ; } } rtb_B_25_1063_8324 = ( _rtB -> B_25_257_2064 >= _rtP -> P_63 ) ; if ( rtb_B_25_1063_8324 ) { memcpy ( & B_5_1006_7896 [ 0 ] , & _rtB -> B_4_420_3368 [ 0 ] , 25U * sizeof ( real_T ) ) ; } else { memcpy ( & B_5_1006_7896 [ 0 ] , & _rtB -> B_25_258_2072 [ 0 ] , 25U * sizeof ( real_T ) ) ; } for ( i = 0 ; i < 5 ; i ++ ) { rtb_B_4_852_6664 = 0.0 ; for ( i_0 = 0 ; i_0 < 5 ; i_0 ++ ) { rtb_B_4_852_6664 += B_5_1006_7896 [ 5 * i_0 + i ] * rtb_B_25_611_4736 [ i_0 ] ; } rtb_B_25_937_7344 [ i ] = _rtP -> P_64 [ i ] * rtb_B_4_852_6664 ; } rtb_B_3_890_6968 = rtb_B_25_937_7344 [ 0 ] * rtb_B_25_610_4728 + rtb_B_25_937_7344 [ 1 ] * rtb_B_25_609_4720 ; rtb_B_3_887_6944 = ( ( - rtb_B_25_937_7344 [ 0 ] - 1.7320508075688772 * rtb_B_25_937_7344 [ 1 ] ) * rtb_B_25_610_4728 + ( 1.7320508075688772 * rtb_B_25_937_7344 [ 0 ] - rtb_B_25_937_7344 [ 1 ] ) * rtb_B_25_609_4720 ) * 0.5 ; rtb_B_4_855_6688 = ( 0.0 - rtb_B_3_890_6968 ) - rtb_B_3_887_6944 ; _rtB -> B_25_1_16 [ 0 ] = _rtP -> P_65 * rtb_B_3_890_6968 ; _rtB -> B_25_1_16 [ 1 ] = _rtP -> P_65 * rtb_B_3_887_6944 ; _rtB -> B_25_1_16 [ 2 ] = _rtP -> P_65 * rtb_B_4_855_6688 ; ssCallAccelRunBlock ( S , 25 , 14 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_557_4464 [ 0 ] = _rtP -> P_68 * _rtB -> B_25_4_40 [ 8 ] * _rtP -> P_71 ; _rtB -> B_25_557_4464 [ 1 ] = _rtP -> P_69 * _rtB -> B_25_4_40 [ 9 ] * _rtP -> P_71 ; _rtB -> B_25_557_4464 [ 2 ] = _rtP -> P_70 * _rtB -> B_25_4_40 [ 10 ] * _rtP -> P_71 ; ssCallAccelRunBlock ( S , 25 , 19 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_560_4488 [ 0 ] = _rtP -> P_72 * _rtB -> B_25_4_40 [ 2 ] * _rtP -> P_75 ; _rtB -> B_25_560_4488 [ 1 ] = _rtP -> P_73 * _rtB -> B_25_4_40 [ 3 ] * _rtP -> P_75 ; _rtB -> B_25_560_4488 [ 2 ] = _rtP -> P_74 * _rtB -> B_25_4_40 [ 4 ] * _rtP -> P_75 ; ssCallAccelRunBlock ( S , 25 , 24 , SS_CALL_MDL_OUTPUTS ) ; { if ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace4_PWORK . AQHandles && ssGetLogOutput ( S ) ) { sdiWriteSignal ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace4_PWORK . AQHandles , ssGetTaskTime ( S , 3 ) , ( char * ) & _rtB -> B_25_560_4488 [ 0 ] + 0 ) ; } } { if ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace5_PWORK . AQHandles && ssGetLogOutput ( S ) ) { sdiWriteSignal ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace5_PWORK . AQHandles , ssGetTaskTime ( S , 3 ) , ( char * ) & _rtB -> B_25_557_4464 [ 0 ] + 0 ) ; } } if ( _rtDW -> systemEnable != 0 ) { _rtDW -> lastSin = muDoubleScalarSin ( _rtP -> P_78 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> lastCos = muDoubleScalarCos ( _rtP -> P_78 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> systemEnable = 0 ; } _rtB -> B_25_18_152 = ( ( _rtDW -> lastSin * _rtP -> P_83 + _rtDW -> lastCos * _rtP -> P_82 ) * _rtP -> P_81 + ( _rtDW -> lastCos * _rtP -> P_83 - _rtDW -> lastSin * _rtP -> P_82 ) * _rtP -> P_80 ) * _rtP -> P_76 + _rtP -> P_77 ; if ( _rtDW -> systemEnable_k != 0 ) { _rtDW -> lastSin_p = muDoubleScalarSin ( _rtP -> P_86 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> lastCos_l = muDoubleScalarCos ( _rtP -> P_86 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> systemEnable_k = 0 ; } _rtB -> B_25_19_160 = ( ( _rtDW -> lastSin_p * _rtP -> P_91 + _rtDW -> lastCos_l * _rtP -> P_90 ) * _rtP -> P_89 + ( _rtDW -> lastCos_l * _rtP -> P_91 - _rtDW -> lastSin_p * _rtP -> P_90 ) * _rtP -> P_88 ) * _rtP -> P_84 + _rtP -> P_85 ; if ( _rtDW -> systemEnable_d != 0 ) { _rtDW -> lastSin_i = muDoubleScalarSin ( _rtP -> P_94 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> lastCos_e = muDoubleScalarCos ( _rtP -> P_94 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> systemEnable_d = 0 ; } _rtB -> B_25_20_168 = ( ( _rtDW -> lastSin_i * _rtP -> P_99 + _rtDW -> lastCos_e * _rtP -> P_98 ) * _rtP -> P_97 + ( _rtDW -> lastCos_e * _rtP -> P_99 - _rtDW -> lastSin_i * _rtP -> P_98 ) * _rtP -> P_96 ) * _rtP -> P_92 + _rtP -> P_93 ; if ( _rtDW -> systemEnable_b != 0 ) { _rtDW -> lastSin_b = muDoubleScalarSin ( _rtP -> P_102 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> lastCos_c = muDoubleScalarCos ( _rtP -> P_102 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> systemEnable_b = 0 ; } _rtB -> B_25_21_176 = ( ( _rtDW -> lastSin_b * _rtP -> P_107 + _rtDW -> lastCos_c * _rtP -> P_106 ) * _rtP -> P_105 + ( _rtDW -> lastCos_c * _rtP -> P_107 - _rtDW -> lastSin_b * _rtP -> P_106 ) * _rtP -> P_104 ) * _rtP -> P_100 + _rtP -> P_101 ; if ( _rtDW -> systemEnable_i != 0 ) { _rtDW -> lastSin_pm = muDoubleScalarSin ( _rtP -> P_110 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> lastCos_b = muDoubleScalarCos ( _rtP -> P_110 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> systemEnable_i = 0 ; } _rtB -> B_25_22_184 = ( ( _rtDW -> lastSin_pm * _rtP -> P_115 + _rtDW -> lastCos_b * _rtP -> P_114 ) * _rtP -> P_113 + ( _rtDW -> lastCos_b * _rtP -> P_115 - _rtDW -> lastSin_pm * _rtP -> P_114 ) * _rtP -> P_112 ) * _rtP -> P_108 + _rtP -> P_109 ; if ( _rtDW -> systemEnable_kd != 0 ) { _rtDW -> lastSin_k = muDoubleScalarSin ( _rtP -> P_118 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> lastCos_i = muDoubleScalarCos ( _rtP -> P_118 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> systemEnable_kd = 0 ; } _rtB -> B_25_23_192 = ( ( _rtDW -> lastSin_k * _rtP -> P_123 + _rtDW -> lastCos_i * _rtP -> P_122 ) * _rtP -> P_121 + ( _rtDW -> lastCos_i * _rtP -> P_123 - _rtDW -> lastSin_k * _rtP -> P_122 ) * _rtP -> P_120 ) * _rtP -> P_116 + _rtP -> P_117 ; if ( _rtDW -> systemEnable_c != 0 ) { _rtDW -> lastSin_n = muDoubleScalarSin ( _rtP -> P_126 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> lastCos_g = muDoubleScalarCos ( _rtP -> P_126 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> systemEnable_c = 0 ; } _rtB -> B_25_24_200 = ( ( _rtDW -> lastSin_n * _rtP -> P_131 + _rtDW -> lastCos_g * _rtP -> P_130 ) * _rtP -> P_129 + ( _rtDW -> lastCos_g * _rtP -> P_131 - _rtDW -> lastSin_n * _rtP -> P_130 ) * _rtP -> P_128 ) * _rtP -> P_124 + _rtP -> P_125 ; if ( _rtDW -> systemEnable_f != 0 ) { _rtDW -> lastSin_i3 = muDoubleScalarSin ( _rtP -> P_134 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> lastCos_k = muDoubleScalarCos ( _rtP -> P_134 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> systemEnable_f = 0 ; } _rtB -> B_25_25_208 = ( ( _rtDW -> lastSin_i3 * _rtP -> P_139 + _rtDW -> lastCos_k * _rtP -> P_138 ) * _rtP -> P_137 + ( _rtDW -> lastCos_k * _rtP -> P_139 - _rtDW -> lastSin_i3 * _rtP -> P_138 ) * _rtP -> P_136 ) * _rtP -> P_132 + _rtP -> P_133 ; if ( _rtDW -> systemEnable_m != 0 ) { _rtDW -> lastSin_f = muDoubleScalarSin ( _rtP -> P_142 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> lastCos_l1 = muDoubleScalarCos ( _rtP -> P_142 * ssGetTaskTime ( S , 3 ) ) ; _rtDW -> systemEnable_m = 0 ; } _rtB -> B_25_26_216 = ( ( _rtDW -> lastSin_f * _rtP -> P_147 + _rtDW -> lastCos_l1 * _rtP -> P_146 ) * _rtP -> P_145 + ( _rtDW -> lastCos_l1 * _rtP -> P_147 - _rtDW -> lastSin_f * _rtP -> P_146 ) * _rtP -> P_144 ) * _rtP -> P_140 + _rtP -> P_141 ; ssCallAccelRunBlock ( S , 25 , 70 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_560_4488 [ 0 ] = _rtP -> P_158 * _rtB -> B_25_27_224 [ 29 ] * _rtP -> P_161 ; _rtB -> B_25_560_4488 [ 1 ] = _rtP -> P_159 * _rtB -> B_25_27_224 [ 30 ] * _rtP -> P_161 ; _rtB -> B_25_560_4488 [ 2 ] = _rtP -> P_160 * _rtB -> B_25_27_224 [ 31 ] * _rtP -> P_161 ; ssCallAccelRunBlock ( S , 25 , 75 , SS_CALL_MDL_OUTPUTS ) ; for ( i = 0 ; i < 6 ; i ++ ) { if ( _rtB -> B_25_69_560 [ i + 8 ] >= _rtP -> P_164 ) { rtb_B_4_852_6664 = _rtB -> B_25_27_224 [ i + 8 ] * _rtP -> P_163 ; } else { rtb_B_4_852_6664 = _rtP -> P_162 ; } if ( rtb_B_4_852_6664 > _rtP -> P_165 ) { _rtB -> B_25_83_672 [ i ] = _rtP -> P_165 ; } else if ( rtb_B_4_852_6664 < _rtP -> P_166 ) { _rtB -> B_25_83_672 [ i ] = _rtP -> P_166 ; } else { _rtB -> B_25_83_672 [ i ] = rtb_B_4_852_6664 ; } } rtb_B_4_934_7320 [ 0 ] = _rtP -> P_168 * _rtB -> B_25_27_224 [ 18 ] * _rtP -> P_171 ; rtb_B_4_934_7320 [ 1 ] = _rtP -> P_169 * _rtB -> B_25_27_224 [ 19 ] * _rtP -> P_171 ; rtb_B_4_934_7320 [ 2 ] = _rtP -> P_170 * _rtB -> B_25_27_224 [ 20 ] * _rtP -> P_171 ; { if ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace_PWORK . AQHandles && ssGetLogOutput ( S ) ) { sdiWriteSignal ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace_PWORK . AQHandles , ssGetTaskTime ( S , 3 ) , ( char * ) & rtb_B_4_934_7320 [ 0 ] + 0 ) ; } } rtb_B_4_934_7320 [ 0 ] = _rtP -> P_172 * _rtB -> B_25_27_224 [ 33 ] * _rtP -> P_175 ; rtb_B_4_934_7320 [ 1 ] = _rtP -> P_173 * _rtB -> B_25_27_224 [ 34 ] * _rtP -> P_175 ; rtb_B_4_934_7320 [ 2 ] = _rtP -> P_174 * _rtB -> B_25_27_224 [ 35 ] * _rtP -> P_175 ; { if ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace1_PWORK . AQHandles && ssGetLogOutput ( S ) ) { sdiWriteSignal ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace1_PWORK . AQHandles , ssGetTaskTime ( S , 3 ) , ( char * ) & rtb_B_4_934_7320 [ 0 ] + 0 ) ; } } rtb_B_4_852_6664 = rtb_B_4_934_7320 [ 1 ] ; rtb_B_25_643_4992 = rtb_B_4_934_7320 [ 0 ] ; B_3_885_6928_idx_0 = rtb_B_4_934_7320 [ 2 ] ; for ( i = 0 ; i < 3 ; i ++ ) { _rtB -> B_25_89_720 [ i ] = ( ( _rtP -> P_176 [ i + 3 ] * rtb_B_4_852_6664 + _rtP -> P_176 [ i ] * rtb_B_25_643_4992 ) + _rtP -> P_176 [ i + 6 ] * B_3_885_6928_idx_0 ) * _rtP -> P_177 ; } } i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { if ( ssIsModeUpdateTimeStep ( S ) ) { _rtDW -> RelationalOperator_Mode = ( _rtX -> Integrator_CSTATE > _rtB -> B_25_230_1848 ) ; } _rtB -> B_25_576_4546 = _rtDW -> RelationalOperator_Mode ; } _rtB -> B_25_92_744 = _rtX -> Integrator_CSTATE - _rtB -> B_25_230_1848 ; if ( ( _rtDW -> Initial_FirstOutputTime == ( rtMinusInf ) ) || ( _rtDW -> Initial_FirstOutputTime == ssGetTaskTime ( S , 0 ) ) ) { _rtDW -> Initial_FirstOutputTime = ssGetTaskTime ( S , 0 ) ; _rtB -> B_25_93_752 = _rtP -> P_178 ; } else { _rtB -> B_25_93_752 = _rtB -> B_25_92_744 ; } if ( ssIsModeUpdateTimeStep ( S ) ) { rtb_B_25_1063_8324 = ( _rtB -> B_25_576_4546 && ( _rtZCE -> Integrator_Reset_ZCE != POS_ZCSIG ) ) ; _rtZCE -> Integrator_Reset_ZCE = _rtB -> B_25_576_4546 ; if ( rtb_B_25_1063_8324 || _rtDW -> Integrator_DWORK1 ) { rtb_B_25_1063_8324 = ( _rtX -> Integrator_CSTATE != _rtB -> B_25_93_752 ) ; _rtX -> Integrator_CSTATE = _rtB -> B_25_93_752 ; if ( rtb_B_25_1063_8324 ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; ssSetContTimeOutputInconsistentWithStateAtMajorStep ( S ) ; } } if ( _rtX -> Integrator_CSTATE >= _rtP -> P_179 ) { if ( _rtX -> Integrator_CSTATE != _rtP -> P_179 ) { _rtX -> Integrator_CSTATE = _rtP -> P_179 ; ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; ssSetContTimeOutputInconsistentWithStateAtMajorStep ( S ) ; } _rtDW -> Integrator_MODE = 3 ; } else if ( _rtX -> Integrator_CSTATE <= _rtP -> P_180 ) { if ( _rtX -> Integrator_CSTATE != _rtP -> P_180 ) { _rtX -> Integrator_CSTATE = _rtP -> P_180 ; ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; ssSetContTimeOutputInconsistentWithStateAtMajorStep ( S ) ; } _rtDW -> Integrator_MODE = 4 ; } else { if ( _rtDW -> Integrator_MODE != 0 ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } _rtDW -> Integrator_MODE = 0 ; } _rtB -> B_25_94_760 = _rtX -> Integrator_CSTATE ; } else { _rtB -> B_25_94_760 = _rtX -> Integrator_CSTATE ; } Micro_Grid_Mains_ON_Subsystem1 ( S , _rtB -> B_25_570_4540 , & _rtB -> B_25_89_720 [ 0 ] , _rtB -> B_25_94_760 , & _rtB -> Subsystem1_g , & _rtDW -> Subsystem1_g ) ; Micro_Grid_Mains_ON_Subsystempi2delay ( S , _rtB -> B_25_571_4541 , & _rtB -> B_25_89_720 [ 0 ] , _rtB -> B_25_94_760 , & _rtB -> Subsystempi2delay_n , & _rtDW -> Subsystempi2delay_n ) ; if ( _rtB -> B_25_570_4540 != 0 ) { _rtB -> B_25_95_768 [ 0 ] = _rtB -> Subsystem1_g . B_14_601_4656 ; _rtB -> B_25_95_768 [ 1 ] = _rtB -> Subsystem1_g . B_14_602_4664 ; } else { _rtB -> B_25_95_768 [ 0 ] = _rtB -> Subsystempi2delay_n . B_13_603_4672 ; _rtB -> B_25_95_768 [ 1 ] = _rtB -> Subsystempi2delay_n . B_13_604_4680 ; } rtb_B_4_852_6664 = _rtP -> P_181 * _rtB -> B_25_95_768 [ 1 ] ; _rtB -> B_25_97_784 = _rtB -> B_25_227_1824 - _rtB -> B_25_95_768 [ 0 ] ; _rtB -> B_25_98_792 = _rtX -> Integrator_CSTATE_d ; rtb_B_25_643_4992 = _rtP -> P_182 * _rtB -> B_25_97_784 + _rtB -> B_25_98_792 ; i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_99_800 [ 0 ] = _rtP -> P_184 * _rtB -> B_25_27_224 [ 14 ] * _rtP -> P_187 ; _rtB -> B_25_99_800 [ 1 ] = _rtP -> P_185 * _rtB -> B_25_27_224 [ 15 ] * _rtP -> P_187 ; _rtB -> B_25_99_800 [ 2 ] = _rtP -> P_186 * _rtB -> B_25_27_224 [ 16 ] * _rtP -> P_187 ; B_3_885_6928_idx_0 = _rtB -> B_25_99_800 [ 1 ] ; B_3_885_6928_idx_1 = _rtB -> B_25_99_800 [ 0 ] ; B_25_700_5448_idx_1 = _rtB -> B_25_99_800 [ 2 ] ; for ( i = 0 ; i < 3 ; i ++ ) { _rtB -> B_25_102_824 [ i ] = ( ( _rtP -> P_188 [ i + 3 ] * B_3_885_6928_idx_0 + _rtP -> P_188 [ i ] * B_3_885_6928_idx_1 ) + _rtP -> P_188 [ i + 6 ] * B_25_700_5448_idx_1 ) * _rtP -> P_189 ; } } Micro_Grid_Mains_ON_Subsystem1 ( S , _rtB -> B_25_568_4538 , & _rtB -> B_25_102_824 [ 0 ] , _rtB -> B_25_94_760 , & _rtB -> Subsystem1_l , & _rtDW -> Subsystem1_l ) ; Micro_Grid_Mains_ON_Subsystempi2delay ( S , _rtB -> B_25_569_4539 , & _rtB -> B_25_102_824 [ 0 ] , _rtB -> B_25_94_760 , & _rtB -> Subsystempi2delay_k , & _rtDW -> Subsystempi2delay_k ) ; if ( _rtB -> B_25_568_4538 != 0 ) { B_3_885_6928_idx_0 = _rtB -> Subsystem1_l . B_14_601_4656 ; B_3_885_6928_idx_1 = _rtB -> Subsystem1_l . B_14_602_4664 ; } else { B_3_885_6928_idx_0 = _rtB -> Subsystempi2delay_k . B_13_603_4672 ; B_3_885_6928_idx_1 = _rtB -> Subsystempi2delay_k . B_13_604_4680 ; } rtb_B_4_852_6664 = ( rtb_B_25_643_4992 + rtb_B_4_852_6664 ) + B_3_885_6928_idx_0 ; _rtB -> B_25_105_848 = _rtB -> B_25_228_1832 - _rtB -> B_25_95_768 [ 1 ] ; _rtB -> B_25_106_856 = _rtX -> Integrator_CSTATE_p ; rtb_B_25_643_4992 = ( ( _rtP -> P_191 * _rtB -> B_25_105_848 + _rtB -> B_25_106_856 ) - _rtP -> P_190 * _rtB -> B_25_95_768 [ 0 ] ) + B_3_885_6928_idx_1 ; i = ssIsSampleHit ( S , 1 , 0 ) ; if ( ( i != 0 ) && ssIsModeUpdateTimeStep ( S ) ) { if ( _rtB -> B_25_572_4542 > 0 ) { if ( ! _rtDW -> Subsystem1_MODE ) { if ( ssGetTaskTime ( S , 1 ) != ssGetTStart ( S ) ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } _rtDW -> Subsystem1_MODE = true ; } } else if ( _rtDW -> Subsystem1_MODE ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; _rtDW -> Subsystem1_MODE = false ; } } if ( _rtDW -> Subsystem1_MODE ) { _rtB -> B_24_377_3024 = rtb_B_4_852_6664 * muDoubleScalarCos ( _rtB -> B_25_94_760 ) - rtb_B_25_643_4992 * muDoubleScalarSin ( _rtB -> B_25_94_760 ) ; _rtB -> B_24_378_3032 = rtb_B_4_852_6664 * muDoubleScalarSin ( _rtB -> B_25_94_760 ) + rtb_B_25_643_4992 * muDoubleScalarCos ( _rtB -> B_25_94_760 ) ; if ( ssIsModeUpdateTimeStep ( S ) ) { srUpdateBC ( _rtDW -> Subsystem1_SubsysRanBC ) ; } } i = ssIsSampleHit ( S , 1 , 0 ) ; if ( ( i != 0 ) && ssIsModeUpdateTimeStep ( S ) ) { if ( _rtB -> B_25_573_4543 > 0 ) { if ( ! _rtDW -> Subsystempi2delay_MODE ) { if ( ssGetTaskTime ( S , 1 ) != ssGetTStart ( S ) ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } _rtDW -> Subsystempi2delay_MODE = true ; } } else if ( _rtDW -> Subsystempi2delay_MODE ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; _rtDW -> Subsystempi2delay_MODE = false ; } } if ( _rtDW -> Subsystempi2delay_MODE ) { _rtB -> B_23_379_3040 = rtb_B_4_852_6664 * muDoubleScalarSin ( _rtB -> B_25_94_760 ) + rtb_B_25_643_4992 * muDoubleScalarCos ( _rtB -> B_25_94_760 ) ; _rtB -> B_23_380_3048 = - rtb_B_4_852_6664 * muDoubleScalarCos ( _rtB -> B_25_94_760 ) + rtb_B_25_643_4992 * muDoubleScalarSin ( _rtB -> B_25_94_760 ) ; if ( ssIsModeUpdateTimeStep ( S ) ) { srUpdateBC ( _rtDW -> Subsystempi2delay_SubsysRanBC ) ; } } if ( _rtB -> B_25_572_4542 != 0 ) { rtb_B_4_852_6664 = _rtB -> B_24_377_3024 ; rtb_B_25_643_4992 = _rtB -> B_24_378_3032 ; } else { rtb_B_4_852_6664 = _rtB -> B_23_379_3040 ; rtb_B_25_643_4992 = _rtB -> B_23_380_3048 ; } for ( i = 0 ; i < 3 ; i ++ ) { _rtB -> B_25_107_864 [ i ] = ( ( _rtP -> P_193 [ i + 3 ] * rtb_B_25_643_4992 + _rtP -> P_193 [ i ] * rtb_B_4_852_6664 ) + _rtP -> P_193 [ i + 6 ] * 0.0 ) * _rtP -> P_194 ; } _rtB -> B_25_110_888 = _rtP -> P_195 * _rtB -> B_25_97_784 ; _rtB -> B_25_111_896 = _rtP -> P_196 * _rtB -> B_25_105_848 ; i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_112_904 = _rtDW -> Memory_PreviousInput ; if ( ssIsModeUpdateTimeStep ( S ) ) { if ( _rtB -> B_25_229_1840 > 0.0 ) { if ( ! _rtDW -> AutomaticGainControl_MODE ) { if ( ssGetTaskTime ( S , 1 ) != ssGetTStart ( S ) ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } ( void ) memset ( & ( ( ( XDis_Micro_Grid_Mains_ON_T * ) ssGetContStateDisabled ( S ) ) -> VariableTransportDelay_CSTATE_m ) , 0 , 4 * sizeof ( boolean_T ) ) ; _rtDW -> AutomaticGainControl_MODE = true ; } } else { if ( ssGetTaskTime ( S , 1 ) == ssGetTStart ( S ) ) { ( void ) memset ( & ( ( ( XDis_Micro_Grid_Mains_ON_T * ) ssGetContStateDisabled ( S ) ) -> VariableTransportDelay_CSTATE_m ) , 1 , 4 * sizeof ( boolean_T ) ) ; } if ( _rtDW -> AutomaticGainControl_MODE ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; ( void ) memset ( & ( ( ( XDis_Micro_Grid_Mains_ON_T * ) ssGetContStateDisabled ( S ) ) -> VariableTransportDelay_CSTATE_m ) , 1 , 4 * sizeof ( boolean_T ) ) ; if ( _rtDW -> Subsystempi2delay_h . Subsystempi2delay_MODE ) { Micro_Grid_Mains_ON_Subsystempi2delay_Disable ( S , & _rtDW -> Subsystempi2delay_h ) ; } if ( _rtDW -> Subsystem1_b . Subsystem1_MODE ) { Micro_Grid_Mains_ON_Subsystem1_Disable ( S , & _rtDW -> Subsystem1_b ) ; } _rtDW -> AutomaticGainControl_MODE = false ; } } } } if ( _rtDW -> AutomaticGainControl_MODE ) { { real_T * * uBuffer = ( real_T * * ) & _rtDW -> VariableTransportDelay_PWORK_p . TUbufferPtrs [ 0 ] ; real_T simTime = ssGetT ( S ) ; real_T appliedDelay ; _rtB -> B_15_383_3072 = Micro_Grid_Mains_ON_acc_rt_VTDelayfindtDInterpolate ( _rtX -> VariableTransportDelay_CSTATE_m , * uBuffer , _rtDW -> VariableTransportDelay_IWORK_k . CircularBufSize , _rtDW -> VariableTransportDelay_IWORK_k . Head , _rtDW -> VariableTransportDelay_IWORK_k . Tail , & _rtDW -> VariableTransportDelay_IWORK_k . Last , simTime , 0.0 , 0 , ( boolean_T ) ( ssIsMinorTimeStep ( S ) && ( ( * uBuffer + _rtDW -> VariableTransportDelay_IWORK_k . CircularBufSize ) [ _rtDW -> VariableTransportDelay_IWORK_k . Head ] == ssGetT ( S ) ) ) , _rtP -> P_35 , & appliedDelay ) ; } _rtB -> B_15_384_3080 = _rtX -> integrator_CSTATE_c ; _rtB -> B_15_385_3088 = ssGetT ( S ) ; i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { if ( ssIsModeUpdateTimeStep ( S ) ) { _rtDW -> RelationalOperator_Mode_n3 = ( _rtB -> B_15_385_3088 >= _rtB -> B_15_406_3256 ) ; } _rtB -> B_15_584_4554 = _rtDW -> RelationalOperator_Mode_n3 ; } if ( _rtB -> B_15_584_4554 ) { _rtB -> B_11_412_3304 = _rtB -> B_15_384_3080 - _rtB -> B_15_383_3072 ; _rtB -> B_11_413_3312 = _rtB -> B_11_412_3304 * _rtB -> B_25_112_904 ; _rtB -> B_15_386_3096 = _rtB -> B_11_413_3312 ; } else { _rtB -> B_15_386_3096 = _rtB -> B_15_407_3264 ; } { real_T * * uBuffer = ( real_T * * ) & _rtDW -> VariableTransportDelay_PWORK_h . TUbufferPtrs [ 0 ] ; real_T simTime = ssGetT ( S ) ; real_T appliedDelay ; _rtB -> B_15_387_3104 = Micro_Grid_Mains_ON_acc_rt_VTDelayfindtDInterpolate ( _rtX -> VariableTransportDelay_CSTATE_a , * uBuffer , _rtDW -> VariableTransportDelay_IWORK_l . CircularBufSize , _rtDW -> VariableTransportDelay_IWORK_l . Head , _rtDW -> VariableTransportDelay_IWORK_l . Tail , & _rtDW -> VariableTransportDelay_IWORK_l . Last , simTime , 0.0 , 0 , ( boolean_T ) ( ssIsMinorTimeStep ( S ) && ( ( * uBuffer + _rtDW -> VariableTransportDelay_IWORK_l . CircularBufSize ) [ _rtDW -> VariableTransportDelay_IWORK_l . Head ] == ssGetT ( S ) ) ) , _rtP -> P_38 , & appliedDelay ) ; } _rtB -> B_15_388_3112 = _rtX -> integrator_CSTATE_g ; _rtB -> B_15_389_3120 = ssGetT ( S ) ; i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { if ( ssIsModeUpdateTimeStep ( S ) ) { _rtDW -> RelationalOperator_Mode_i = ( _rtB -> B_15_389_3120 >= _rtB -> B_15_408_3272 ) ; } _rtB -> B_15_585_4555 = _rtDW -> RelationalOperator_Mode_i ; } if ( _rtB -> B_15_585_4555 ) { _rtB -> B_12_410_3288 = _rtB -> B_15_388_3112 - _rtB -> B_15_387_3104 ; _rtB -> B_12_411_3296 = _rtB -> B_12_410_3288 * _rtB -> B_25_112_904 ; _rtB -> B_15_390_3128 = _rtB -> B_12_411_3296 ; } else { _rtB -> B_15_390_3128 = _rtB -> B_15_409_3280 ; } _rtB -> B_15_0_0 . re = _rtB -> B_15_386_3096 ; _rtB -> B_15_0_0 . im = _rtB -> B_15_390_3128 ; _rtB -> B_15_391_3136 = muDoubleScalarHypot ( _rtB -> B_15_0_0 . re , _rtB -> B_15_0_0 . im ) ; if ( ssIsModeUpdateTimeStep ( S ) ) { if ( _rtB -> B_15_391_3136 >= _rtP -> P_40 ) { _rtDW -> Saturation_MODE = 1 ; } else if ( _rtB -> B_15_391_3136 > _rtP -> P_41 ) { _rtDW -> Saturation_MODE = 0 ; } else { _rtDW -> Saturation_MODE = - 1 ; } } if ( _rtDW -> Saturation_MODE == 1 ) { _rtB -> B_15_392_3144 = _rtP -> P_40 ; } else if ( _rtDW -> Saturation_MODE == - 1 ) { _rtB -> B_15_392_3144 = _rtP -> P_41 ; } else { _rtB -> B_15_392_3144 = _rtB -> B_15_391_3136 ; } _rtB -> B_15_393_3152 = 1.0 / _rtB -> B_15_392_3144 ; if ( _rtB -> B_25_112_904 > _rtP -> P_42 ) { _rtB -> B_15_394_3160 = _rtP -> P_42 ; } else if ( _rtB -> B_25_112_904 < _rtP -> P_43 ) { _rtB -> B_15_394_3160 = _rtP -> P_43 ; } else { _rtB -> B_15_394_3160 = _rtB -> B_25_112_904 ; } _rtB -> B_15_395_3168 = 1.0 / _rtB -> B_15_394_3160 ; if ( _rtB -> B_25_112_904 > _rtP -> P_44 ) { _rtB -> B_15_396_3176 = _rtP -> P_44 ; } else if ( _rtB -> B_25_112_904 < _rtP -> P_45 ) { _rtB -> B_15_396_3176 = _rtP -> P_45 ; } else { _rtB -> B_15_396_3176 = _rtB -> B_25_112_904 ; } _rtB -> B_15_397_3184 = 1.0 / _rtB -> B_15_396_3176 ; B_3_885_6928_idx_0 = _rtB -> B_25_99_800 [ 1 ] ; B_3_885_6928_idx_1 = _rtB -> B_25_99_800 [ 0 ] ; B_25_700_5448_idx_1 = _rtB -> B_25_99_800 [ 2 ] ; for ( i = 0 ; i < 3 ; i ++ ) { rtb_B_4_852_6664 = ( _rtP -> P_46 [ i + 3 ] * B_3_885_6928_idx_0 + _rtP -> P_46 [ i ] * B_3_885_6928_idx_1 ) + _rtP -> P_46 [ i + 6 ] * B_25_700_5448_idx_1 ; _rtB -> B_15_398_3192 [ i ] = rtb_B_4_852_6664 ; _rtB -> B_15_401_3216 [ i ] = _rtP -> P_47 * rtb_B_4_852_6664 ; } Micro_Grid_Mains_ON_Subsystempi2delay ( S , _rtB -> B_15_575_4545 , & _rtB -> B_15_401_3216 [ 0 ] , _rtB -> B_25_94_760 , & _rtB -> Subsystempi2delay_h , & _rtDW -> Subsystempi2delay_h ) ; Micro_Grid_Mains_ON_Subsystem1 ( S , _rtB -> B_15_574_4544 , & _rtB -> B_15_401_3216 [ 0 ] , _rtB -> B_25_94_760 , & _rtB -> Subsystem1_b , & _rtDW -> Subsystem1_b ) ; if ( _rtB -> B_15_574_4544 != 0 ) { _rtB -> B_15_404_3240 [ 0 ] = _rtB -> Subsystem1_b . B_14_601_4656 ; _rtB -> B_15_404_3240 [ 1 ] = _rtB -> Subsystem1_b . B_14_602_4664 ; } else { _rtB -> B_15_404_3240 [ 0 ] = _rtB -> Subsystempi2delay_h . B_13_603_4672 ; _rtB -> B_15_404_3240 [ 1 ] = _rtB -> Subsystempi2delay_h . B_13_604_4680 ; } if ( ssIsModeUpdateTimeStep ( S ) ) { srUpdateBC ( _rtDW -> AutomaticGainControl_SubsysRanBC ) ; } } if ( ssIsModeUpdateTimeStep ( S ) ) { if ( _rtX -> Integrator_CSTATE_m >= _rtP -> P_200 ) { if ( _rtX -> Integrator_CSTATE_m != _rtP -> P_200 ) { _rtX -> Integrator_CSTATE_m = _rtP -> P_200 ; ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } _rtDW -> Integrator_MODE_p = 3 ; } else if ( _rtX -> Integrator_CSTATE_m <= _rtP -> P_201 ) { if ( _rtX -> Integrator_CSTATE_m != _rtP -> P_201 ) { _rtX -> Integrator_CSTATE_m = _rtP -> P_201 ; ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } _rtDW -> Integrator_MODE_p = 4 ; } else { if ( _rtDW -> Integrator_MODE_p != 0 ) { ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } _rtDW -> Integrator_MODE_p = 0 ; } _rtB -> B_25_113_912 = _rtX -> Integrator_CSTATE_m ; } else { _rtB -> B_25_113_912 = _rtX -> Integrator_CSTATE_m ; } { real_T * * uBuffer = ( real_T * * ) & _rtDW -> VariableTransportDelay_PWORK . TUbufferPtrs [ 0 ] ; real_T simTime = ssGetT ( S ) ; real_T appliedDelay ; _rtB -> B_25_114_920 = Micro_Grid_Mains_ON_acc_rt_VTDelayfindtDInterpolate ( _rtX -> VariableTransportDelay_CSTATE , * uBuffer , _rtDW -> VariableTransportDelay_IWORK . CircularBufSize , _rtDW -> VariableTransportDelay_IWORK . Head , _rtDW -> VariableTransportDelay_IWORK . Tail , & _rtDW -> VariableTransportDelay_IWORK . Last , simTime , 0.0 , 0 , ( boolean_T ) ( ssIsMinorTimeStep ( S ) && ( ( * uBuffer + _rtDW -> VariableTransportDelay_IWORK . CircularBufSize ) [ _rtDW -> VariableTransportDelay_IWORK . Head ] == ssGetT ( S ) ) ) , _rtP -> P_203 , & appliedDelay ) ; } _rtB -> B_25_115_928 = _rtX -> integrator_CSTATE ; _rtB -> B_25_116_936 = ssGetT ( S ) ; i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { if ( ssIsModeUpdateTimeStep ( S ) ) { _rtDW -> RelationalOperator_Mode_n = ( _rtB -> B_25_116_936 >= _rtB -> B_25_231_1856 ) ; } _rtB -> B_25_577_4547 = _rtDW -> RelationalOperator_Mode_n ; } if ( _rtB -> B_25_577_4547 ) { _rtB -> B_16_381_3056 = _rtB -> B_25_115_928 - _rtB -> B_25_114_920 ; _rtB -> B_16_382_3064 = _rtB -> B_16_381_3056 * _rtB -> B_25_112_904 ; _rtB -> B_25_117_944 = _rtB -> B_16_382_3064 ; } else { _rtB -> B_25_117_944 = _rtB -> B_25_232_1864 ; } _rtB -> B_25_118_952 = _rtB -> B_25_117_944 * _rtB -> B_15_393_3152 ; _rtB -> B_25_119_960 = _rtP -> P_205 * _rtB -> B_25_118_952 ; _rtB -> B_25_120_968 = _rtP -> P_206 * _rtB -> B_25_118_952 ; _rtB -> B_25_121_976 = _rtP -> P_207 * _rtB -> B_25_118_952 ; _rtB -> B_25_122_984 = 0.0 ; _rtB -> B_25_122_984 += _rtP -> P_209 * _rtX -> TransferFcn_CSTATE ; _rtB -> B_25_122_984 += _rtP -> P_210 * _rtB -> B_25_121_976 ; _rtB -> B_25_123_992 = ( _rtB -> B_25_119_960 + _rtB -> B_25_113_912 ) + _rtB -> B_25_122_984 ; if ( ssIsModeUpdateTimeStep ( S ) ) { if ( _rtB -> B_25_123_992 >= _rtP -> P_211 ) { _rtDW -> Saturation2_MODE = 1 ; } else if ( _rtB -> B_25_123_992 > _rtP -> P_212 ) { _rtDW -> Saturation2_MODE = 0 ; } else { _rtDW -> Saturation2_MODE = - 1 ; } } if ( _rtDW -> Saturation2_MODE == 1 ) { _rtB -> B_25_124_1000 = _rtP -> P_211 ; } else if ( _rtDW -> Saturation2_MODE == - 1 ) { _rtB -> B_25_124_1000 = _rtP -> P_212 ; } else { _rtB -> B_25_124_1000 = _rtB -> B_25_123_992 ; } _rtB -> B_25_125_1008 = _rtP -> P_213 * _rtB -> B_25_124_1000 ; if ( _rtDW -> LastMajorTime == ( rtInf ) ) { _rtB -> B_25_126_1016 = _rtB -> B_25_125_1008 ; } else { rtb_B_25_643_4992 = ssGetTaskTime ( S , 0 ) - _rtDW -> LastMajorTime ; if ( _rtDW -> LastMajorTime == ssGetTaskTime ( S , 0 ) ) { if ( _rtDW -> PrevLimited ) { _rtB -> B_25_126_1016 = _rtDW -> PrevY ; } else { _rtB -> B_25_126_1016 = _rtB -> B_25_125_1008 ; } } else { B_3_885_6928_idx_0 = rtb_B_25_643_4992 * _rtP -> P_214 ; rtb_B_4_852_6664 = _rtB -> B_25_125_1008 - _rtDW -> PrevY ; if ( rtb_B_4_852_6664 > B_3_885_6928_idx_0 ) { _rtB -> B_25_126_1016 = _rtDW -> PrevY + B_3_885_6928_idx_0 ; rtb_B_25_1063_8324 = true ; } else { rtb_B_25_643_4992 *= _rtP -> P_215 ; if ( rtb_B_4_852_6664 < rtb_B_25_643_4992 ) { _rtB -> B_25_126_1016 = _rtDW -> PrevY + rtb_B_25_643_4992 ; rtb_B_25_1063_8324 = true ; } else { _rtB -> B_25_126_1016 = _rtB -> B_25_125_1008 ; rtb_B_25_1063_8324 = false ; } } if ( ssIsModeUpdateTimeStep ( S ) ) { _rtDW -> PrevLimited = rtb_B_25_1063_8324 ; } } } _rtB -> B_25_127_1024 = _rtX -> Integrator_x1_CSTATE ; _rtB -> B_25_128_1032 = _rtP -> P_217 * _rtB -> B_25_127_1024 ; _rtB -> B_25_129_1040 = _rtX -> Integrator_x2_CSTATE ; _rtB -> B_25_130_1048 = _rtP -> P_219 * _rtB -> B_25_129_1040 ; _rtB -> B_25_131_1056 = _rtP -> P_220 * _rtB -> B_25_127_1024 ; _rtB -> B_25_132_1064 = _rtP -> P_221 * _rtB -> B_25_129_1040 ; _rtB -> B_25_133_1072 = _rtB -> B_25_128_1032 + _rtB -> B_25_130_1048 ; _rtB -> B_25_134_1080 = _rtB -> B_25_131_1056 + _rtB -> B_25_132_1064 ; _rtB -> B_25_135_1088 = _rtP -> P_222 * _rtB -> B_25_126_1016 ; _rtB -> B_25_136_1096 = _rtB -> B_25_133_1072 + _rtB -> B_25_135_1088 ; _rtB -> B_25_137_1104 = _rtP -> P_223 * _rtB -> B_25_126_1016 ; _rtB -> B_25_138_1112 = _rtB -> B_25_134_1080 + _rtB -> B_25_137_1104 ; _rtB -> B_25_139_1120 = ( _rtP -> P_224 * _rtB -> B_25_127_1024 + _rtP -> P_225 * _rtB -> B_25_129_1040 ) + _rtP -> P_226 * _rtB -> B_25_126_1016 ; if ( _rtB -> B_25_112_904 > _rtP -> P_227 ) { _rtB -> B_25_140_1128 = _rtP -> P_227 ; } else if ( _rtB -> B_25_112_904 < _rtP -> P_228 ) { _rtB -> B_25_140_1128 = _rtP -> P_228 ; } else { _rtB -> B_25_140_1128 = _rtB -> B_25_112_904 ; } _rtB -> B_25_141_1136 = 1.0 / _rtB -> B_25_140_1128 ; B_3_885_6928_idx_0 = _rtB -> B_25_99_800 [ 1 ] ; B_3_885_6928_idx_1 = _rtB -> B_25_99_800 [ 0 ] ; B_25_700_5448_idx_1 = _rtB -> B_25_99_800 [ 2 ] ; for ( i = 0 ; i < 3 ; i ++ ) { rtb_B_4_852_6664 = ( _rtP -> P_229 [ i + 3 ] * B_3_885_6928_idx_0 + _rtP -> P_229 [ i ] * B_3_885_6928_idx_1 ) + _rtP -> P_229 [ i + 6 ] * B_25_700_5448_idx_1 ; _rtB -> B_25_142_1144 [ i ] = rtb_B_4_852_6664 ; _rtB -> B_25_145_1168 [ i ] = _rtP -> P_230 * rtb_B_4_852_6664 ; } Micro_Grid_Mains_ON_Subsystempi2delay ( S , _rtB -> B_25_567_4537 , & _rtB -> B_25_145_1168 [ 0 ] , _rtB -> B_25_94_760 , & _rtB -> Subsystempi2delay , & _rtDW -> Subsystempi2delay ) ; Micro_Grid_Mains_ON_Subsystem1 ( S , _rtB -> B_25_566_4536 , & _rtB -> B_25_145_1168 [ 0 ] , _rtB -> B_25_94_760 , & _rtB -> Subsystem1 , & _rtDW -> Subsystem1 ) ; if ( _rtB -> B_25_566_4536 != 0 ) { _rtB -> B_25_148_1192 [ 0 ] = _rtB -> Subsystem1 . B_14_601_4656 ; _rtB -> B_25_148_1192 [ 1 ] = _rtB -> Subsystem1 . B_14_602_4664 ; } else { _rtB -> B_25_148_1192 [ 0 ] = _rtB -> Subsystempi2delay . B_13_603_4672 ; _rtB -> B_25_148_1192 [ 1 ] = _rtB -> Subsystempi2delay . B_13_604_4680 ; } i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_150_1208 = _rtP -> P_231 ; } rtb_B_4_852_6664 = ssGetT ( S ) + _rtB -> B_25_150_1208 ; i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_151_1216 = _rtP -> P_232 ; } rtb_B_4_852_6664 = look1_pbinlxpw ( _rtP -> P_233 * muDoubleScalarRem ( rtb_B_4_852_6664 , _rtB -> B_25_151_1216 ) , _rtP -> P_235 , _rtP -> P_234 , & _rtDW -> m_bpIndex , 2U ) ; i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_152_1224 = _rtP -> P_236 ; } _rtB -> B_25_153_1232 = ( ( rtb_B_4_852_6664 - _rtB -> B_25_152_1224 ) * _rtB -> B_25_235_1888 + _rtB -> B_25_233_1872 [ 0 ] ) + _rtB -> B_25_235_1888 ; i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { if ( ssIsModeUpdateTimeStep ( S ) ) { _rtDW -> RelationalOperator2_Mode [ 0 ] = ( _rtB -> B_25_107_864 [ 0 ] >= _rtB -> B_25_153_1232 ) ; _rtDW -> RelationalOperator2_Mode [ 1 ] = ( _rtB -> B_25_107_864 [ 1 ] >= _rtB -> B_25_153_1232 ) ; _rtDW -> RelationalOperator2_Mode [ 2 ] = ( _rtB -> B_25_107_864 [ 2 ] >= _rtB -> B_25_153_1232 ) ; } _rtB -> B_25_578_4548 [ 0 ] = _rtDW -> RelationalOperator2_Mode [ 0 ] ; _rtB -> B_25_578_4548 [ 1 ] = _rtDW -> RelationalOperator2_Mode [ 1 ] ; _rtB -> B_25_578_4548 [ 2 ] = _rtDW -> RelationalOperator2_Mode [ 2 ] ; } _rtB -> B_25_154_1240 [ 0 ] = _rtB -> B_25_578_4548 [ 0 ] ; _rtB -> B_25_154_1240 [ 1 ] = ! _rtB -> B_25_578_4548 [ 0 ] ; _rtB -> B_25_154_1240 [ 2 ] = _rtB -> B_25_578_4548 [ 1 ] ; _rtB -> B_25_154_1240 [ 3 ] = ! _rtB -> B_25_578_4548 [ 1 ] ; _rtB -> B_25_154_1240 [ 4 ] = _rtB -> B_25_578_4548 [ 2 ] ; _rtB -> B_25_154_1240 [ 5 ] = ! _rtB -> B_25_578_4548 [ 2 ] ; i = ssIsSampleHit ( S , 4 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_160_1288 = _rtDW -> UnitDelay_DSTATE_l ; } i = ssIsSampleHit ( S , 2 , 0 ) ; if ( i != 0 ) { if ( _rtDW -> UnitDelay_DSTATE_b > _rtP -> P_239 ) { _rtB -> B_25_161_1296 = _rtP -> P_239 ; } else if ( _rtDW -> UnitDelay_DSTATE_b < _rtP -> P_240 ) { _rtB -> B_25_161_1296 = _rtP -> P_240 ; } else { _rtB -> B_25_161_1296 = _rtDW -> UnitDelay_DSTATE_b ; } } i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { ssCallAccelRunBlock ( S , 25 , 243 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_164_1320 = _rtP -> P_251 * _rtB -> B_25_162_1304 [ 1 ] ; ssCallAccelRunBlock ( S , 25 , 245 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_165_1328 = ( _rtB -> B_25_164_1320 > Micro_Grid_Mains_ON_rtC ( S ) -> B_25_1070_8344 ) ; } i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_166_1336 = _rtDW -> Initialit_PreviousInput ; } i = ssIsSampleHit ( S , 2 , 0 ) ; if ( i != 0 ) { if ( _rtDW -> CoulombCounter_IC_LOADING != 0 ) { _rtDW -> CoulombCounter_DSTATE = _rtB -> B_25_166_1336 ; if ( _rtDW -> CoulombCounter_DSTATE > _rtP -> P_254 ) { _rtDW -> CoulombCounter_DSTATE = _rtP -> P_254 ; } else if ( _rtDW -> CoulombCounter_DSTATE < _rtP -> P_255 ) { _rtDW -> CoulombCounter_DSTATE = _rtP -> P_255 ; } } if ( ( _rtB -> B_25_165_1328 > 0.0 ) && ( _rtDW -> CoulombCounter_PrevResetState <= 0 ) ) { _rtDW -> CoulombCounter_DSTATE = _rtB -> B_25_166_1336 ; if ( _rtDW -> CoulombCounter_DSTATE > _rtP -> P_254 ) { _rtDW -> CoulombCounter_DSTATE = _rtP -> P_254 ; } else if ( _rtDW -> CoulombCounter_DSTATE < _rtP -> P_255 ) { _rtDW -> CoulombCounter_DSTATE = _rtP -> P_255 ; } } _rtB -> B_25_167_1344 = _rtP -> P_256 * _rtDW -> CoulombCounter_DSTATE ; } i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_581_4551 = ( _rtB -> B_25_164_1320 < Micro_Grid_Mains_ON_rtC ( S ) -> B_25_1069_8336 ) ; } i = ssIsSampleHit ( S , 2 , 0 ) ; if ( i != 0 ) { ssCallAccelRunBlock ( S , 6 , 0 , SS_CALL_MDL_OUTPUTS ) ; rtb_B_4_852_6664 = ( _rtB -> B_25_238_1912 - _rtB -> B_6_416_3336 ) / _rtB -> B_25_238_1912 * _rtP -> P_257 ; if ( rtb_B_4_852_6664 > _rtP -> P_258 ) { _rtB -> B_25_168_1352 = _rtP -> P_258 ; } else if ( rtb_B_4_852_6664 < _rtP -> P_259 ) { _rtB -> B_25_168_1352 = _rtP -> P_259 ; } else { _rtB -> B_25_168_1352 = rtb_B_4_852_6664 ; } ssCallAccelRunBlock ( S , 25 , 256 , SS_CALL_MDL_OUTPUTS ) ; ssCallAccelRunBlock ( S , 25 , 257 , SS_CALL_MDL_OUTPUTS ) ; } i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_169_1360 = _rtDW -> DiscreteTimeIntegrator_DSTATE ; _rtB -> B_25_170_1368 = _rtP -> P_262 * _rtDW -> CurrentFilter_states ; } i = ssIsSampleHit ( S , 2 , 0 ) ; if ( i != 0 ) { ssCallAccelRunBlock ( S , 7 , 0 , SS_CALL_MDL_OUTPUTS ) ; } i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_171_1376 = _rtP -> P_265 * _rtB -> B_25_164_1320 ; } i = ssIsSampleHit ( S , 2 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_172_1384 = ( _rtB -> B_7_414_3320 - _rtB -> B_25_171_1376 ) + _rtB -> B_25_236_1896 ; } i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { rtb_B_4_852_6664 = _rtP -> P_266 * muDoubleScalarAbs ( _rtB -> B_25_164_1320 ) ; _rtB -> B_25_173_1392 = _rtP -> P_267 * ( real_T ) _rtB -> B_25_581_4551 * rtb_B_4_852_6664 - _rtB -> B_25_169_1360 * rtb_B_4_852_6664 ; } i = ssIsSampleHit ( S , 2 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_174_1400 = _rtP -> P_268 * _rtB -> B_6_416_3336 ; } i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { _rtB -> B_25_175_1408 = _rtP -> P_269 * _rtB -> B_25_162_1304 [ 0 ] ; ssCallAccelRunBlock ( S , 25 , 280 , SS_CALL_MDL_OUTPUTS ) ; if ( _rtP -> P_270 >= _rtP -> P_271 ) { _rtB -> B_25_176_1416 = _rtB -> B_25_240_1928 ; } else { _rtB -> B_25_176_1416 = rt_Lookup ( & _rtP -> P_29 [ 0 ] , 5 , ssGetTaskTime ( S , 3 ) , & _rtP -> P_30 [ 0 ] ) ; } _rtB -> B_25_177_1424 = _rtP -> P_272 * _rtB -> B_25_27_224 [ 24 ] ; ssCallAccelRunBlock ( S , 25 , 296 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_557_4464 [ 0 ] = _rtP -> P_273 * _rtB -> B_25_27_224 [ 21 ] * _rtP -> P_276 ; _rtB -> B_25_557_4464 [ 1 ] = _rtP -> P_274 * _rtB -> B_25_27_224 [ 22 ] * _rtP -> P_276 ; _rtB -> B_25_557_4464 [ 2 ] = _rtP -> P_275 * _rtB -> B_25_27_224 [ 23 ] * _rtP -> P_276 ; _rtB -> B_25_563_4512 [ 0 ] = _rtP -> P_277 * _rtB -> B_25_27_224 [ 36 ] * _rtP -> P_280 ; _rtB -> B_25_563_4512 [ 1 ] = _rtP -> P_278 * _rtB -> B_25_27_224 [ 37 ] * _rtP -> P_280 ; _rtB -> B_25_563_4512 [ 2 ] = _rtP -> P_279 * _rtB -> B_25_27_224 [ 38 ] * _rtP -> P_280 ; ssCallAccelRunBlock ( S , 25 , 308 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_178_1432 = _rtP -> P_281 * _rtB -> B_25_27_224 [ 25 ] ; ssCallAccelRunBlock ( S , 25 , 344 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_179_1440 = _rtP -> P_283 * _rtB -> B_25_27_224 [ 17 ] ; _rtB -> B_25_582_4552 = ( _rtB -> B_25_179_1440 >= _rtB -> B_25_241_1936 ) ; if ( _rtP -> P_282 >= _rtP -> P_284 ) { _rtB -> B_25_180_1448 = _rtB -> B_25_582_4552 ; } else { _rtB -> B_25_180_1448 = rt_Lookup ( & _rtP -> P_31 [ 0 ] , 5 , ssGetTaskTime ( S , 3 ) , & _rtP -> P_32 [ 0 ] ) ; } ssCallAccelRunBlock ( S , 25 , 366 , SS_CALL_MDL_OUTPUTS ) ; ssCallAccelRunBlock ( S , 25 , 367 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_181_1456 = _rtP -> P_285 * _rtB -> B_25_27_224 [ 32 ] ; ssCallAccelRunBlock ( S , 25 , 372 , SS_CALL_MDL_OUTPUTS ) ; ssCallAccelRunBlock ( S , 25 , 401 , SS_CALL_MDL_OUTPUTS ) ; { if ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace_PWORK_e . AQHandles && ssGetLogOutput ( S ) ) { sdiWriteSignal ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace_PWORK_e . AQHandles , ssGetTaskTime ( S , 3 ) , ( char * ) & _rtB -> B_25_99_800 [ 0 ] + 0 ) ; } } { if ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace1_PWORK_k . AQHandles && ssGetLogOutput ( S ) ) { sdiWriteSignal ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace1_PWORK_k . AQHandles , ssGetTaskTime ( S , 3 ) , ( char * ) & _rtB -> B_25_560_4488 [ 0 ] + 0 ) ; } } _rtB -> B_25_563_4512 [ 0 ] = _rtP -> P_286 * _rtB -> B_25_27_224 [ 39 ] * _rtP -> P_289 ; _rtB -> B_25_563_4512 [ 1 ] = _rtP -> P_287 * _rtB -> B_25_27_224 [ 40 ] * _rtP -> P_289 ; _rtB -> B_25_563_4512 [ 2 ] = _rtP -> P_288 * _rtB -> B_25_27_224 [ 41 ] * _rtP -> P_289 ; ssCallAccelRunBlock ( S , 25 , 442 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_560_4488 [ 0 ] = _rtP -> P_290 * _rtB -> B_25_27_224 [ 26 ] * _rtP -> P_293 ; _rtB -> B_25_560_4488 [ 1 ] = _rtP -> P_291 * _rtB -> B_25_27_224 [ 27 ] * _rtP -> P_293 ; _rtB -> B_25_560_4488 [ 2 ] = _rtP -> P_292 * _rtB -> B_25_27_224 [ 28 ] * _rtP -> P_293 ; ssCallAccelRunBlock ( S , 25 , 447 , SS_CALL_MDL_OUTPUTS ) ; { if ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace2_PWORK . AQHandles && ssGetLogOutput ( S ) ) { sdiWriteSignal ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace2_PWORK . AQHandles , ssGetTaskTime ( S , 3 ) , ( char * ) & _rtB -> B_25_560_4488 [ 0 ] + 0 ) ; } } { if ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace3_PWORK . AQHandles && ssGetLogOutput ( S ) ) { sdiWriteSignal ( _rtDW -> _asyncqueue_inserted_for_ToWorkspace3_PWORK . AQHandles , ssGetTaskTime ( S , 3 ) , ( char * ) & _rtB -> B_25_563_4512 [ 0 ] + 0 ) ; } } if ( _rtB -> B_25_309_2480 >= _rtP -> P_295 ) { B_3_885_6928_idx_0 = _rtB -> B_4_470_3768 ; B_3_885_6928_idx_1 = _rtB -> B_4_417_3344 ; } else { B_3_885_6928_idx_0 = _rtB -> B_25_310_2488 [ 0 ] ; B_3_885_6928_idx_1 = _rtB -> B_25_310_2488 [ 1 ] ; } rtb_B_25_643_4992 = _rtP -> P_294 [ 0 ] * rtb_B_25_611_4736 [ 0 ] * B_3_885_6928_idx_0 ; B_25_700_5448_idx_1 = _rtP -> P_294 [ 1 ] * rtb_B_25_611_4736 [ 4 ] * B_3_885_6928_idx_0 ; rtb_B_4_934_7320 [ 0 ] = _rtP -> P_296 [ 0 ] * rtb_B_25_611_4736 [ 1 ] * B_3_885_6928_idx_1 ; rtb_B_4_934_7320 [ 1 ] = _rtP -> P_296 [ 1 ] * rtb_B_25_611_4736 [ 2 ] * B_3_885_6928_idx_1 ; rtb_B_4_934_7320 [ 2 ] = _rtP -> P_296 [ 2 ] * rtb_B_25_611_4736 [ 3 ] * B_3_885_6928_idx_1 ; B_3_885_6928_idx_0 = _rtP -> P_297 * _rtB -> B_25_4_40 [ 0 ] ; B_3_885_6928_idx_1 = _rtP -> P_297 * _rtB -> B_25_4_40 [ 1 ] ; _rtB -> B_25_182_1464 = ( ( 2.0 * B_3_885_6928_idx_0 + B_3_885_6928_idx_1 ) * rtb_B_25_610_4728 + 1.7320508075688772 * B_3_885_6928_idx_1 * rtb_B_25_609_4720 ) * 0.33333333333333331 ; _rtB -> B_25_183_1472 = ( ( 2.0 * B_3_885_6928_idx_0 + B_3_885_6928_idx_1 ) * rtb_B_25_609_4720 + - 1.7320508075688772 * B_3_885_6928_idx_1 * rtb_B_25_610_4728 ) * 0.33333333333333331 ; _rtB -> B_25_184_1480 [ 0 ] = _rtP -> P_302 [ 0 ] * rtb_B_3_890_6968 ; _rtB -> B_25_184_1480 [ 1 ] = _rtP -> P_302 [ 1 ] * rtb_B_3_887_6944 ; _rtB -> B_25_184_1480 [ 2 ] = _rtP -> P_302 [ 2 ] * rtb_B_4_855_6688 ; _rtB -> B_25_184_1480 [ 3 ] = rtb_B_25_937_7344 [ 0 ] * _rtP -> P_302 [ 3 ] ; _rtB -> B_25_184_1480 [ 4 ] = rtb_B_25_937_7344 [ 1 ] * _rtP -> P_302 [ 4 ] ; _rtB -> B_25_184_1480 [ 5 ] = rtb_B_25_937_7344 [ 2 ] * _rtP -> P_302 [ 5 ] ; _rtB -> B_25_184_1480 [ 6 ] = rtb_B_25_937_7344 [ 4 ] * _rtP -> P_302 [ 6 ] ; if ( _rtB -> B_25_583_4553 ) { rtb_B_4_852_6664 = rtb_B_25_937_7344 [ 0 ] ; } else { rtb_B_4_852_6664 = _rtB -> B_25_254_2040 ; } _rtB -> B_25_184_1480 [ 7 ] = _rtP -> P_302 [ 7 ] * rtb_B_4_852_6664 ; _rtB -> B_25_184_1480 [ 8 ] = rtb_B_25_937_7344 [ 3 ] * _rtP -> P_302 [ 8 ] ; _rtB -> B_25_184_1480 [ 9 ] = ( rtb_B_25_643_4992 + B_25_700_5448_idx_1 ) * _rtP -> P_302 [ 9 ] ; _rtB -> B_25_184_1480 [ 10 ] = ( ( rtb_B_4_934_7320 [ 0 ] + rtb_B_4_934_7320 [ 1 ] ) + rtb_B_4_934_7320 [ 2 ] ) * _rtP -> P_302 [ 10 ] ; _rtB -> B_25_184_1480 [ 11 ] = _rtP -> P_302 [ 11 ] * _rtB -> B_25_182_1464 ; _rtB -> B_25_184_1480 [ 12 ] = _rtP -> P_302 [ 12 ] * _rtB -> B_25_183_1472 ; if ( _rtB -> B_25_283_2272 >= _rtP -> P_298 ) { rtb_B_4_852_6664 = _rtB -> B_4_419_3360 ; } else { rtb_B_4_852_6664 = _rtB -> B_25_312_2504 [ 0 ] ; } _rtB -> B_25_184_1480 [ 13 ] = _rtP -> P_302 [ 13 ] * rtb_B_4_852_6664 ; if ( _rtB -> B_25_283_2272 >= _rtP -> P_298 ) { rtb_B_4_852_6664 = _rtB -> B_4_418_3352 ; } else { rtb_B_4_852_6664 = _rtB -> B_25_312_2504 [ 1 ] ; } _rtB -> B_25_184_1480 [ 14 ] = _rtP -> P_302 [ 14 ] * rtb_B_4_852_6664 ; _rtB -> B_25_184_1480 [ 15 ] = _rtP -> P_299 * muDoubleScalarAtan2 ( _rtB -> B_25_183_1472 , _rtB -> B_25_182_1464 ) * _rtP -> P_302 [ 15 ] ; _rtB -> B_25_184_1480 [ 16 ] = ( _rtB -> B_25_182_1464 * rtb_B_25_937_7344 [ 0 ] + _rtB -> B_25_183_1472 * rtb_B_25_937_7344 [ 1 ] ) * _rtP -> P_300 * _rtP -> P_302 [ 16 ] ; _rtB -> B_25_184_1480 [ 17 ] = ( _rtB -> B_25_182_1464 * rtb_B_25_937_7344 [ 1 ] - _rtB -> B_25_183_1472 * rtb_B_25_937_7344 [ 0 ] ) * _rtP -> P_301 * _rtP -> P_302 [ 17 ] ; ssCallAccelRunBlock ( S , 25 , 507 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_202_1624 = _rtDW -> dw_delay_DSTATE ; rtb_B_25_609_4720 = _rtP -> P_304 * _rtB -> B_25_202_1624 - _rtDW -> dw_predict_DSTATE ; rtb_B_25_610_4728 = _rtB -> B_25_366_2936 + rtb_B_25_609_4720 ; _rtB -> B_25_203_1632 = _rtP -> P_306 * rtb_B_25_610_4728 ; ssCallAccelRunBlock ( S , 25 , 514 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_204_1640 = _rtDW -> UnitDelay2_DSTATE ; ssCallAccelRunBlock ( S , 25 , 516 , SS_CALL_MDL_OUTPUTS ) ; _rtB -> B_25_205_1648 = muDoubleScalarSqrt ( muDoubleScalarPower ( _rtB -> B_25_184_1480 [ 12 ] , 2.0 ) + muDoubleScalarPower ( _rtB -> B_25_184_1480 [ 11 ] , 2.0 ) ) ; { B_25_722_5624 = _rtP -> P_310 * _rtDW -> DiscreteStateSpace_DSTATE ; B_25_722_5624 += _rtP -> P_311 * _rtB -> B_25_205_1648 ; } _rtB -> B_25_206_1656 = ( ( _rtB -> B_25_367_2944 + _rtB -> B_25_248_1992 ) - B_25_722_5624 ) - _rtDW -> UnitDelay1_DSTATE ; { B_25_724_5640 = _rtP -> P_317 * _rtB -> B_25_206_1656 ; } _rtB -> B_25_207_1664 = _rtP -> P_319 * B_25_724_5640 ; { B_25_725_5648 = _rtP -> P_322 * _rtDW -> DiscreteStateSpace_DSTATE_j ; B_25_725_5648 += _rtP -> P_323 * _rtB -> B_25_207_1664 ; } rtb_B_25_1063_8324 = ( B_25_725_5648 > _rtB -> B_25_249_2000 ) ; rtb_B_4_855_6688 = _rtP -> P_325 * B_25_722_5624 + _rtB -> B_25_250_2008 ; rtb_B_25_1064_8325 = ( B_25_725_5648 < rtb_B_4_855_6688 ) ; _rtB -> B_25_208_1672 = ( ( ( real_T ) ( rtb_B_25_1063_8324 && rtb_B_25_1064_8325 ) * B_25_725_5648 + _rtB -> B_25_249_2000 * ( real_T ) ! rtb_B_25_1063_8324 ) + ( real_T ) ! rtb_B_25_1064_8325 * rtb_B_4_855_6688 ) * _rtP -> P_326 ; { _rtB -> B_25_209_1680 = _rtP -> P_329 * _rtDW -> DiscreteStateSpace_DSTATE_p ; _rtB -> B_25_209_1680 += _rtP -> P_330 * _rtB -> B_25_208_1672 ; } _rtB -> B_25_210_1688 = _rtP -> P_332 * _rtB -> B_25_209_1680 ; { _rtB -> B_25_211_1696 = ( _rtP -> P_335 ) * _rtDW -> DiscreteStateSpace_DSTATE_l ; _rtB -> B_25_211_1696 += _rtP -> P_336 * _rtB -> B_25_210_1688 ; } if ( _rtB -> B_25_251_2016 >= _rtP -> P_342 ) { rtb_B_4_852_6664 = _rtDW -> position_DSTATE ; } else { rtb_B_4_852_6664 = _rtB -> B_25_184_1480 [ 16 ] - _rtB -> B_25_253_2032 ; } rtb_B_4_855_6688 = ( _rtB -> B_25_368_2952 - _rtB -> B_25_203_1632 ) - _rtP -> P_343 * rtb_B_4_852_6664 ; _rtB -> B_25_212_1704 = _rtP -> P_344 * rtb_B_4_855_6688 ; _rtDW -> Derivative_tmp = ( _rtB -> B_25_212_1704 - _rtP -> P_346 [ 1 ] * _rtDW -> Derivative_states ) / _rtP -> P_346 [ 0 ] ; _rtB -> B_25_213_1712 = _rtP -> P_353 * rtb_B_4_855_6688 ; rtb_B_4_852_6664 = ( _rtP -> P_352 * rtb_B_4_855_6688 + _rtDW -> DiscreteTimeIntegrator_DSTATE_p ) + ( _rtP -> P_345 [ 0 ] * _rtDW -> Derivative_tmp + _rtP -> P_345 [ 1 ] * _rtDW -> Derivative_states ) ; if ( rtb_B_4_852_6664 > _rtP -> P_354 ) { rtb_B_4_852_6664 = _rtP -> P_354 ; } else if ( rtb_B_4_852_6664 < _rtP -> P_355 ) { rtb_B_4_852_6664 = _rtP -> P_355 ; } _rtB -> B_25_214_1720 = ( rtb_B_4_852_6664 - _rtDW -> position_DSTATE ) * _rtP -> P_356 ; { B_25_746_5816 = _rtP -> P_359 * _rtDW -> DiscreteStateSpace_DSTATE_o ; B_25_746_5816 += _rtP -> P_360 * _rtB -> B_25_214_1720 ; } if ( B_25_746_5816 > _rtP -> P_362 ) { _rtB -> B_25_215_1728 = _rtP -> P_362 ; } else if ( B_25_746_5816 < _rtP -> P_363 ) { _rtB -> B_25_215_1728 = _rtP -> P_363 ; } else { _rtB -> B_25_215_1728 = B_25_746_5816 ; } rtb_B_4_855_6688 = muDoubleScalarPower ( _rtDW -> position_DSTATE_g / ( _rtP -> P_364 * _rtDW -> position_DSTATE ) , 2.0 ) - _rtP -> P_367 * rtb_B_25_609_4720 ; _rtB -> B_25_216_1736 = ( _rtB -> B_25_252_2024 - rtb_B_4_855_6688 ) * _rtP -> P_368 ; _rtB -> B_25_217_1744 = _rtP -> P_369 * _rtB -> B_25_204_1640 ; if ( ssGetTaskTime ( S , 3 ) >= _rtP -> P_372 ) { memcpy ( & rtb_B_4_860_6728 [ 0 ] , & _rtB -> B_25_314_2520 [ 0 ] , 25U * sizeof ( real_T ) ) ; rtb_B_4_860_6728 [ 5 ] = rtb_B_25_610_4728 ; rtb_B_4_860_6728 [ 1 ] = _rtP -> P_26 * rtb_B_25_610_4728 ; rtb_B_25_1063_8324 = ( _rtB -> B_25_256_2056 >= _rtP -> P_25 ) ; for ( i = 0 ; i < 25 ; i ++ ) { if ( rtb_B_25_1063_8324 ) { rtb_B_4_852_6664 = _rtB -> B_4_445_3568 [ i ] ; } else { rtb_B_4_852_6664 = _rtB -> B_25_284_2280 [ i ] ; } rtb_B_3_890_6968 = ( ( 0.0 - rtb_B_4_860_6728 [ i ] ) - rtb_B_4_852_6664 ) * _rtP -> P_27 ; rtb_B_4_860_6728 [ i ] = rtb_B_3_890_6968 ; B_5_1006_7896 [ i ] = _rtB -> B_25_339_2720 [ i ] - rtb_B_3_890_6968 ; } rt_invd5x5_snf ( B_5_1006_7896 , rtb_B_5_1006_7896 ) ; for ( i = 0 ; i < 25 ; i ++ ) { rtb_B_4_860_6728 [ i ] += _rtB -> B_25_339_2720 [ i ] ; } for ( i = 0 ; i < 5 ; i ++ ) { for ( i_0 = 0 ; i_0 < 5 ; i_0 ++ ) { rtb_B_3_890_6968 = 0.0 ; for ( i_1 = 0 ; i_1 < 5 ; i_1 ++ ) { rtb_B_3_890_6968 += rtb_B_5_1006_7896 [ 5 * i_1 + i_0 ] * rtb_B_4_860_6728 [ 5 * i + i_1 ] ; } B_5_1006_7896 [ i_0 + 5 * i ] = rtb_B_3_890_6968 ; } } tmp [ 0 ] = _rtB -> B_25_182_1464 + _rtDW -> voltages_DSTATE [ 0 ] ; tmp [ 1 ] = _rtB -> B_25_183_1472 + _rtDW -> voltages_DSTATE [ 1 ] ; tmp [ 2 ] = _rtB -> B_25_217_1744 + _rtDW -> voltages_DSTATE [ 2 ] ; tmp [ 3 ] = _rtB -> B_25_364_2920 [ 0 ] + _rtDW -> voltages_DSTATE [ 3 ] ; tmp [ 4 ] = _rtB -> B_25_364_2920 [ 1 ] + _rtDW -> voltages_DSTATE [ 4 ] ; for ( i = 0 ; i < 5 ; i ++ ) { rtb_B_3_890_6968 = 0.0 ; rtb_B_4_852_6664 = 0.0 ; for ( i_0 = 0 ; i_0 < 5 ; i_0 ++ ) { rtb_B_3_890_6968 += B_5_1006_7896 [ 5 * i_0 + i ] * rtb_B_25_611_4736 [ i_0 ] ; rtb_B_4_852_6664 += rtb_B_5_1006_7896 [ 5 * i_0 + i ] * _rtP -> P_28 * tmp [ i_0 ] ; } _rtB -> B_25_218_1752 [ i ] = rtb_B_3_890_6968 + rtb_B_4_852_6664 ; } } else { for ( i = 0 ; i < 5 ; i ++ ) { _rtB -> B_25_218_1752 [ i ] = rtb_B_25_611_4736 [ i ] ; } } _rtB -> B_25_223_1792 = ( ( rtb_B_4_855_6688 * _rtDW -> position_DSTATE_g * _rtP -> P_373 / rtb_B_25_610_4728 - ( _rtP -> P_370 [ 0 ] * rtb_B_25_937_7344 [ 0 ] * rtb_B_25_611_4736 [ 1 ] + _rtP -> P_370 [ 1 ] * rtb_B_25_937_7344 [ 1 ] * rtb_B_25_611_4736 [ 0 ] ) ) - _rtP -> P_374 * rtb_B_25_610_4728 ) * _rtP -> P_375 ; if ( _rtDW -> Rotorspeeddeviationdw_SYSTEM_ENABLE != 0 ) { _rtB -> B_25_224_1800 = _rtDW -> Rotorspeeddeviationdw_DSTATE ; } else { _rtB -> B_25_224_1800 = _rtP -> P_376 * _rtB -> B_25_223_1792 + _rtDW -> Rotorspeeddeviationdw_DSTATE ; } _rtB -> B_25_225_1808 = _rtP -> P_380 * rtb_B_25_609_4720 ; _rtB -> B_25_226_1816 = _rtP -> P_381 * rtb_B_25_610_4728 ; _rtB -> B_25_563_4512 [ 0 ] = _rtP -> P_382 * _rtB -> B_25_4_40 [ 5 ] * _rtP -> P_385 ; _rtB -> B_25_563_4512 [ 1 ] = _rtP -> P_383 * _rtB -> B_25_4_40 [ 6 ] * _rtP -> P_385 ; _rtB -> B_25_563_4512 [ 2 ] = _rtP -> P_384 * _rtB -> B_25_4_40 [ 7 ] * _rtP -> P_385 ; ssCallAccelRunBlock ( S , 25 , 593 , SS_CALL_MDL_OUTPUTS ) ; } UNUSED_PARAMETER ( tid ) ; } static void mdlOutputsTID5 ( SimStruct * S , int_T tid ) { B_Micro_Grid_Mains_ON_T * _rtB ; DW_Micro_Grid_Mains_ON_T * _rtDW ; P_Micro_Grid_Mains_ON_T * _rtP ; int32_T i ; _rtDW = ( ( DW_Micro_Grid_Mains_ON_T * ) ssGetRootDWork ( S ) ) ; _rtP = ( ( P_Micro_Grid_Mains_ON_T * ) ssGetModelRtp ( S ) ) ; _rtB = ( ( B_Micro_Grid_Mains_ON_T * ) _ssGetModelBlockIO ( S ) ) ; _rtB -> B_25_227_1824 = _rtP -> P_386 ; _rtB -> B_25_228_1832 = _rtP -> P_387 ; _rtB -> B_15_406_3256 = _rtP -> P_48 ; _rtB -> B_15_407_3264 = _rtP -> P_49 ; _rtB -> B_15_408_3272 = _rtP -> P_50 ; _rtB -> B_15_409_3280 = _rtP -> P_51 ; _rtB -> B_15_574_4544 = ( uint8_T ) ( _rtP -> P_52 == _rtP -> P_53 ) ; _rtB -> B_15_575_4545 = ( uint8_T ) ( _rtP -> P_52 == _rtP -> P_54 ) ; if ( ssIsModeUpdateTimeStep ( S ) ) { srUpdateBC ( _rtDW -> AutomaticGainControl_SubsysRanBC ) ; } _rtB -> B_25_229_1840 = _rtP -> P_388 ; _rtB -> B_25_230_1848 = _rtP -> P_389 ; _rtB -> B_25_231_1856 = _rtP -> P_390 ; _rtB -> B_25_232_1864 = _rtP -> P_391 ; _rtB -> B_25_566_4536 = ( uint8_T ) ( _rtP -> P_392 == _rtP -> P_393 ) ; _rtB -> B_25_567_4537 = ( uint8_T ) ( _rtP -> P_392 == _rtP -> P_394 ) ; _rtB -> B_25_233_1872 [ 0 ] = _rtP -> P_395 [ 0 ] ; _rtB -> B_25_233_1872 [ 1 ] = _rtP -> P_395 [ 1 ] ; _rtB -> B_25_235_1888 = ( _rtB -> B_25_233_1872 [ 1 ] - _rtB -> B_25_233_1872 [ 0 ] ) * _rtP -> P_396 ; _rtB -> B_25_568_4538 = ( uint8_T ) ( _rtP -> P_397 == _rtP -> P_398 ) ; _rtB -> B_25_569_4539 = ( uint8_T ) ( _rtP -> P_397 == _rtP -> P_399 ) ; _rtB -> B_25_570_4540 = ( uint8_T ) ( _rtP -> P_400 == _rtP -> P_401 ) ; _rtB -> B_25_571_4541 = ( uint8_T ) ( _rtP -> P_400 == _rtP -> P_402 ) ; _rtB -> B_25_572_4542 = ( uint8_T ) ( _rtP -> P_403 == _rtP -> P_404 ) ; _rtB -> B_25_573_4543 = ( uint8_T ) ( _rtP -> P_403 == _rtP -> P_405 ) ; _rtB -> B_25_236_1896 = _rtP -> P_406 ; _rtB -> B_25_237_1904 = _rtP -> P_407 ; _rtB -> B_25_238_1912 = _rtP -> P_408 ; _rtB -> B_25_239_1920 = _rtP -> P_409 ; _rtB -> B_25_240_1928 = _rtP -> P_410 ; _rtB -> B_25_241_1936 = _rtP -> P_411 ; for ( i = 0 ; i < 6 ; i ++ ) { _rtB -> B_25_242_1944 [ i ] = _rtP -> P_412 [ i ] ; } _rtB -> B_25_248_1992 = _rtP -> P_413 ; _rtB -> B_25_249_2000 = _rtP -> P_415 ; _rtB -> B_25_250_2008 = ( real_T ) ( _rtP -> P_414 == _rtP -> P_416 ) * _rtP -> P_417 ; _rtB -> B_25_251_2016 = _rtP -> P_418 ; _rtB -> B_25_252_2024 = _rtP -> P_419 ; _rtB -> B_25_253_2032 = _rtP -> P_420 ; _rtB -> B_25_583_4553 = _rtP -> P_441 ; _rtB -> B_25_254_2040 = _rtP -> P_421 ; _rtB -> B_25_255_2048 = _rtP -> P_422 ; _rtB -> B_25_256_2056 = _rtP -> P_423 ; _rtB -> B_25_257_2064 = _rtP -> P_424 ; _rtB -> B_25_283_2272 = _rtP -> P_426 ; _rtB -> B_25_309_2480 = _rtP -> P_428 ; _rtB -> B_25_310_2488 [ 0 ] = _rtP -> P_429 [ 0 ] ; _rtB -> B_25_312_2504 [ 0 ] = _rtP -> P_430 [ 0 ] ; _rtB -> B_25_310_2488 [ 1 ] = _rtP -> P_429 [ 1 ] ; _rtB -> B_25_312_2504 [ 1 ] = _rtP -> P_430 [ 1 ] ; _rtB -> B_4_586_4556 = _rtP -> P_438 ; _rtB -> B_4_587_4557 = _rtP -> P_439 ; _rtB -> B_4_588_4558 = _rtP -> P_440 ; _rtB -> B_4_471_3776 = _rtP -> P_18 ; _rtB -> B_4_472_3784 [ 0 ] = _rtP -> P_19 [ 0 ] ; _rtB -> B_4_472_3784 [ 1 ] = _rtP -> P_19 [ 1 ] ; _rtB -> B_3_553_4432 = _rtP -> P_7 ; _rtB -> B_3_554_4440 [ 0 ] = _rtP -> P_8 [ 0 ] ; _rtB -> B_3_554_4440 [ 1 ] = _rtP -> P_8 [ 1 ] ; _rtB -> B_3_554_4440 [ 2 ] = _rtP -> P_8 [ 2 ] ; _rtB -> B_4_549_4400 = _rtP -> P_23 ; _rtB -> B_4_550_4408 = _rtP -> P_24 ; memcpy ( & _rtB -> B_25_258_2072 [ 0 ] , & _rtP -> P_425 [ 0 ] , 25U * sizeof ( real_T ) ) ; memcpy ( & _rtB -> B_25_284_2280 [ 0 ] , & _rtP -> P_427 [ 0 ] , 25U * sizeof ( real_T ) ) ; memcpy ( & _rtB -> B_25_314_2520 [ 0 ] , & _rtP -> P_431 [ 0 ] , 25U * sizeof ( real_T ) ) ; memcpy ( & _rtB -> B_4_474_3800 [ 0 ] , & _rtP -> P_20 [ 0 ] , 25U * sizeof ( real_T ) ) ; memcpy ( & _rtB -> B_4_499_4000 [ 0 ] , & _rtP -> P_21 [ 0 ] , 25U * sizeof ( real_T ) ) ; memcpy ( & _rtB -> B_4_524_4200 [ 0 ] , & _rtP -> P_22 [ 0 ] , 25U * sizeof ( real_T ) ) ; memcpy ( & _rtB -> B_25_339_2720 [ 0 ] , & _rtP -> P_432 [ 0 ] , 25U * sizeof ( real_T ) ) ; _rtB -> B_25_364_2920 [ 0 ] = _rtP -> P_433 [ 0 ] ; _rtB -> B_25_364_2920 [ 1 ] = _rtP -> P_433 [ 1 ] ; _rtB -> B_25_366_2936 = _rtP -> P_434 ; _rtB -> B_25_367_2944 = _rtP -> P_435 ; _rtB -> B_25_368_2952 = _rtP -> P_436 ; memcpy ( & _rtB -> B_25_369_2960 [ 0 ] , & _rtP -> P_437 [ 0 ] , sizeof ( real_T ) << 3U ) ; UNUSED_PARAMETER ( tid ) ; }
#define MDL_UPDATE
static void mdlUpdate ( SimStruct * S , int_T tid ) { B_Micro_Grid_Mains_ON_T
* _rtB ; DW_Micro_Grid_Mains_ON_T * _rtDW ; P_Micro_Grid_Mains_ON_T * _rtP ;
XDis_Micro_Grid_Mains_ON_T * _rtXdis ; X_Micro_Grid_Mains_ON_T * _rtX ;
real_T HoldSine ; int32_T i ; _rtDW = ( ( DW_Micro_Grid_Mains_ON_T * )
ssGetRootDWork ( S ) ) ; _rtXdis = ( ( XDis_Micro_Grid_Mains_ON_T * )
ssGetContStateDisabled ( S ) ) ; _rtX = ( ( X_Micro_Grid_Mains_ON_T * )
ssGetContStates ( S ) ) ; _rtP = ( ( P_Micro_Grid_Mains_ON_T * )
ssGetModelRtp ( S ) ) ; _rtB = ( ( B_Micro_Grid_Mains_ON_T * )
_ssGetModelBlockIO ( S ) ) ; i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 )
{ _rtDW -> Rotorangledthetae_DSTATE += _rtP -> P_59 * _rtB -> B_25_225_1808 ;
for ( i = 0 ; i < 5 ; i ++ ) { _rtDW -> fluxes_DSTATE [ i ] = _rtB ->
B_25_218_1752 [ i ] ; } if ( _rtB -> B_25_255_2048 > 0.0 ) { i =
ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { _rtDW -> Lmd_sat_DSTATE = _rtB
-> B_4_418_3352 ; if ( _rtB -> B_4_586_4556 ) { i = ssIsSampleHit ( S , 3 , 0
) ; if ( i != 0 ) { _rtDW -> Lmq_sat_DSTATE = _rtB -> B_3_552_4424 ; } } } }
ssCallAccelRunBlock ( S , 25 , 14 , SS_CALL_MDL_UPDATE ) ; HoldSine = _rtDW
-> lastSin ; _rtDW -> lastSin = _rtDW -> lastSin * _rtP -> P_81 + _rtDW ->
lastCos * _rtP -> P_80 ; _rtDW -> lastCos = _rtDW -> lastCos * _rtP -> P_81 -
HoldSine * _rtP -> P_80 ; HoldSine = _rtDW -> lastSin_p ; _rtDW -> lastSin_p
= _rtDW -> lastSin_p * _rtP -> P_89 + _rtDW -> lastCos_l * _rtP -> P_88 ;
_rtDW -> lastCos_l = _rtDW -> lastCos_l * _rtP -> P_89 - HoldSine * _rtP ->
P_88 ; HoldSine = _rtDW -> lastSin_i ; _rtDW -> lastSin_i = _rtDW ->
lastSin_i * _rtP -> P_97 + _rtDW -> lastCos_e * _rtP -> P_96 ; _rtDW ->
lastCos_e = _rtDW -> lastCos_e * _rtP -> P_97 - HoldSine * _rtP -> P_96 ;
HoldSine = _rtDW -> lastSin_b ; _rtDW -> lastSin_b = _rtDW -> lastSin_b *
_rtP -> P_105 + _rtDW -> lastCos_c * _rtP -> P_104 ; _rtDW -> lastCos_c =
_rtDW -> lastCos_c * _rtP -> P_105 - HoldSine * _rtP -> P_104 ; HoldSine =
_rtDW -> lastSin_pm ; _rtDW -> lastSin_pm = _rtDW -> lastSin_pm * _rtP ->
P_113 + _rtDW -> lastCos_b * _rtP -> P_112 ; _rtDW -> lastCos_b = _rtDW ->
lastCos_b * _rtP -> P_113 - HoldSine * _rtP -> P_112 ; HoldSine = _rtDW ->
lastSin_k ; _rtDW -> lastSin_k = _rtDW -> lastSin_k * _rtP -> P_121 + _rtDW
-> lastCos_i * _rtP -> P_120 ; _rtDW -> lastCos_i = _rtDW -> lastCos_i * _rtP
-> P_121 - HoldSine * _rtP -> P_120 ; HoldSine = _rtDW -> lastSin_n ; _rtDW
-> lastSin_n = _rtDW -> lastSin_n * _rtP -> P_129 + _rtDW -> lastCos_g * _rtP
-> P_128 ; _rtDW -> lastCos_g = _rtDW -> lastCos_g * _rtP -> P_129 - HoldSine
* _rtP -> P_128 ; HoldSine = _rtDW -> lastSin_i3 ; _rtDW -> lastSin_i3 =
_rtDW -> lastSin_i3 * _rtP -> P_137 + _rtDW -> lastCos_k * _rtP -> P_136 ;
_rtDW -> lastCos_k = _rtDW -> lastCos_k * _rtP -> P_137 - HoldSine * _rtP ->
P_136 ; HoldSine = _rtDW -> lastSin_f ; _rtDW -> lastSin_f = _rtDW ->
lastSin_f * _rtP -> P_145 + _rtDW -> lastCos_l1 * _rtP -> P_144 ; _rtDW ->
lastCos_l1 = _rtDW -> lastCos_l1 * _rtP -> P_145 - HoldSine * _rtP -> P_144 ;
ssCallAccelRunBlock ( S , 25 , 70 , SS_CALL_MDL_UPDATE ) ; for ( i = 0 ; i <
6 ; i ++ ) { _rtDW -> UnitDelay_DSTATE [ i ] = _rtB -> B_25_83_672 [ i ] ; }
} _rtDW -> Integrator_DWORK1 = false ; switch ( _rtDW -> Integrator_MODE ) {
case 3 : if ( _rtB -> B_25_124_1000 < 0.0 ) { _rtDW -> Integrator_MODE = 1 ;
ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } break ; case 4 : if ( _rtB
-> B_25_124_1000 > 0.0 ) { _rtDW -> Integrator_MODE = 2 ;
ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } break ; } _rtXdis ->
Integrator_CSTATE = ( ( _rtDW -> Integrator_MODE == 3 ) || ( _rtDW ->
Integrator_MODE == 4 ) ) ; i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) {
_rtDW -> Memory_PreviousInput = _rtB -> B_25_139_1120 ; } if ( _rtDW ->
AutomaticGainControl_MODE ) { { real_T * * uBuffer = ( real_T * * ) & _rtDW
-> VariableTransportDelay_PWORK_p . TUbufferPtrs [ 0 ] ; real_T simTime =
ssGetT ( S ) ; _rtDW -> VariableTransportDelay_IWORK_k . Head = ( ( _rtDW ->
VariableTransportDelay_IWORK_k . Head < ( _rtDW ->
VariableTransportDelay_IWORK_k . CircularBufSize - 1 ) ) ? ( _rtDW ->
VariableTransportDelay_IWORK_k . Head + 1 ) : 0 ) ; if ( _rtDW ->
VariableTransportDelay_IWORK_k . Head == _rtDW ->
VariableTransportDelay_IWORK_k . Tail ) { if ( !
Micro_Grid_Mains_ON_acc_rt_TDelayUpdateTailOrGrowBuf ( & _rtDW ->
VariableTransportDelay_IWORK_k . CircularBufSize , & _rtDW ->
VariableTransportDelay_IWORK_k . Tail , & _rtDW ->
VariableTransportDelay_IWORK_k . Head , & _rtDW ->
VariableTransportDelay_IWORK_k . Last , simTime - _rtP -> P_34 , uBuffer , ( boolean_T ) 0 , ( boolean_T ) 1 , & _rtDW -> VariableTransportDelay_IWORK_k . MaxNewBufSize ) ) { ssSetErrorStatus ( S , ( char_T * ) "\"vtdelay memory allocation error\"" ) ; return ; } } ( * uBuffer + _rtDW -> VariableTransportDelay_IWORK_k . CircularBufSize ) [ _rtDW -> VariableTransportDelay_IWORK_k . Head ] = simTime ; ( * uBuffer + 2 * _rtDW -> VariableTransportDelay_IWORK_k . CircularBufSize ) [ _rtDW -> VariableTransportDelay_IWORK_k . Head ] = _rtX -> VariableTransportDelay_CSTATE_m ; ( * uBuffer ) [ _rtDW -> VariableTransportDelay_IWORK_k . Head ] = _rtB -> B_15_384_3080 ; } { real_T * * uBuffer = ( real_T * * ) & _rtDW -> VariableTransportDelay_PWORK_h . TUbufferPtrs [ 0 ] ; real_T simTime = ssGetT ( S ) ; _rtDW -> VariableTransportDelay_IWORK_l . Head = ( ( _rtDW -> VariableTransportDelay_IWORK_l . Head < ( _rtDW -> VariableTransportDelay_IWORK_l . CircularBufSize - 1 ) ) ? ( _rtDW -> VariableTransportDelay_IWORK_l . Head + 1 ) : 0 ) ; if ( _rtDW -> VariableTransportDelay_IWORK_l . Head == _rtDW -> VariableTransportDelay_IWORK_l . Tail ) { if ( ! Micro_Grid_Mains_ON_acc_rt_TDelayUpdateTailOrGrowBuf ( & _rtDW -> VariableTransportDelay_IWORK_l . CircularBufSize , & _rtDW -> VariableTransportDelay_IWORK_l . Tail , & _rtDW -> VariableTransportDelay_IWORK_l . Head , & _rtDW -> VariableTransportDelay_IWORK_l . Last , simTime - _rtP -> P_37 , uBuffer , ( boolean_T ) 0 , ( boolean_T ) 1 , & _rtDW -> VariableTransportDelay_IWORK_l . MaxNewBufSize ) ) { ssSetErrorStatus ( S , ( char_T * ) "\"vtdelay memory allocation error\"" ) ; return ; } } ( * uBuffer + _rtDW -> VariableTransportDelay_IWORK_l . CircularBufSize ) [ _rtDW -> VariableTransportDelay_IWORK_l . Head ] = simTime ; ( * uBuffer + 2 * _rtDW -> VariableTransportDelay_IWORK_l . CircularBufSize ) [ _rtDW -> VariableTransportDelay_IWORK_l . Head ] = _rtX -> VariableTransportDelay_CSTATE_a ; ( * uBuffer ) [ _rtDW -> VariableTransportDelay_IWORK_l . Head ] = _rtB -> B_15_388_3112 ; } } switch ( _rtDW -> Integrator_MODE_p ) { case 3 : if ( _rtB -> B_25_120_968 < 0.0 ) { _rtDW -> Integrator_MODE_p = 1 ; ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } break ; case 4 : if ( _rtB -> B_25_120_968 > 0.0 ) { _rtDW -> Integrator_MODE_p = 2 ; ssSetBlockStateForSolverChangedAtMajorStep ( S ) ; } break ; } _rtXdis -> Integrator_CSTATE_m = ( ( _rtDW -> Integrator_MODE_p == 3 ) || ( _rtDW -> Integrator_MODE_p == 4 ) ) ; { real_T * * uBuffer = ( real_T * * ) & _rtDW -> VariableTransportDelay_PWORK . TUbufferPtrs [ 0 ] ; real_T simTime = ssGetT ( S ) ; _rtDW -> VariableTransportDelay_IWORK . Head = ( ( _rtDW -> VariableTransportDelay_IWORK . Head < ( _rtDW -> VariableTransportDelay_IWORK . CircularBufSize - 1 ) ) ? ( _rtDW -> VariableTransportDelay_IWORK . Head + 1 ) : 0 ) ; if ( _rtDW -> VariableTransportDelay_IWORK . Head == _rtDW -> VariableTransportDelay_IWORK . Tail ) { if ( ! Micro_Grid_Mains_ON_acc_rt_TDelayUpdateTailOrGrowBuf ( & _rtDW -> VariableTransportDelay_IWORK . CircularBufSize , & _rtDW -> VariableTransportDelay_IWORK . Tail , & _rtDW -> VariableTransportDelay_IWORK . Head , & _rtDW -> VariableTransportDelay_IWORK . Last , simTime - _rtP -> P_202 , uBuffer , ( boolean_T ) 0 , ( boolean_T ) 1 , & _rtDW -> VariableTransportDelay_IWORK . MaxNewBufSize ) ) { ssSetErrorStatus ( S , ( char_T * ) "\"vtdelay memory allocation error\"" ) ; return ; } } ( * uBuffer + _rtDW -> VariableTransportDelay_IWORK . CircularBufSize ) [ _rtDW -> VariableTransportDelay_IWORK . Head ] = simTime ; ( * uBuffer + 2 * _rtDW -> VariableTransportDelay_IWORK . CircularBufSize ) [ _rtDW -> VariableTransportDelay_IWORK . Head ] = _rtX -> VariableTransportDelay_CSTATE ; ( * uBuffer ) [ _rtDW -> VariableTransportDelay_IWORK . Head ] = _rtB -> B_25_115_928 ; } _rtDW -> PrevY = _rtB -> B_25_126_1016 ; _rtDW -> LastMajorTime = ssGetTaskTime ( S , 0 ) ; i = ssIsSampleHit ( S , 4 , 0 ) ; if ( i != 0 ) { _rtDW -> UnitDelay_DSTATE_l = _rtB -> B_25_160_1288 ; } i = ssIsSampleHit ( S , 2 , 0 ) ; if ( i != 0 ) { _rtDW -> UnitDelay_DSTATE_b = _rtB -> B_25_172_1384 ; } i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { ssCallAccelRunBlock ( S , 25 , 243 , SS_CALL_MDL_UPDATE ) ; } i = ssIsSampleHit ( S , 1 , 0 ) ; if ( i != 0 ) { _rtDW -> Initialit_PreviousInput = _rtB -> B_25_174_1400 ; } i = ssIsSampleHit ( S , 2 , 0 ) ; if ( i != 0 ) { _rtDW -> CoulombCounter_IC_LOADING = 0U ; _rtDW -> CoulombCounter_DSTATE += _rtP -> P_253 * _rtB -> B_25_170_1368 ; if ( _rtDW -> CoulombCounter_DSTATE > _rtP -> P_254 ) { _rtDW -> CoulombCounter_DSTATE = _rtP -> P_254 ; } else if ( _rtDW -> CoulombCounter_DSTATE < _rtP -> P_255 ) { _rtDW -> CoulombCounter_DSTATE = _rtP -> P_255 ; } if ( _rtB -> B_25_165_1328 > 0.0 ) { _rtDW -> CoulombCounter_PrevResetState = 1 ; } else if ( _rtB -> B_25_165_1328 < 0.0 ) { _rtDW -> CoulombCounter_PrevResetState = - 1 ; } else if ( _rtB -> B_25_165_1328 == 0.0 ) { _rtDW -> CoulombCounter_PrevResetState = 0 ; } else { _rtDW -> CoulombCounter_PrevResetState = 2 ; } } i = ssIsSampleHit ( S , 3 , 0 ) ; if ( i != 0 ) { _rtDW -> DiscreteTimeIntegrator_DSTATE += _rtP -> P_260 * _rtB -> B_25_173_1392 ; _rtDW -> CurrentFilter_states = ( _rtB -> B_25_164_1320 - _rtP -> P_263 [ 1 ] * _rtDW -> CurrentFilter_states ) / _rtP -> P_263 [ 0 ] ; _rtDW -> dw_delay_DSTATE = _rtB -> B_25_224_1800 ; _rtDW -> dw_predict_DSTATE = _rtB -> B_25_202_1624 ; _rtDW -> UnitDelay2_DSTATE = _rtB -> B_25_209_1680 ; { real_T xnew [ 1 ] ; xnew [ 0 ] = _rtP -> P_308 * _rtDW -> DiscreteStateSpace_DSTATE ; xnew [ 0 ] += _rtP -> P_309 * _rtB -> B_25_205_1648 ; ( void ) memcpy ( & _rtDW -> DiscreteStateSpace_DSTATE , xnew , sizeof ( real_T ) * 1 ) ; } _rtDW -> UnitDelay1_DSTATE = _rtB -> B_25_211_1696 ; { real_T xnew [ 1 ] ; xnew [ 0 ] = _rtP -> P_320 * _rtDW -> DiscreteStateSpace_DSTATE_j ; xnew [ 0 ] += _rtP -> P_321 * _rtB -> B_25_207_1664 ; ( void ) memcpy ( & _rtDW -> DiscreteStateSpace_DSTATE_j , xnew , sizeof ( real_T ) * 1 ) ; } { real_T xnew [ 1 ] ; xnew [ 0 ] = ( _rtP -> P_327 ) * _rtDW -> DiscreteStateSpace_DSTATE_p ; xnew [ 0 ] += _rtP -> P_328 * _rtB -> B_25_208_1672 ; ( void ) memcpy ( & _rtDW -> DiscreteStateSpace_DSTATE_p , xnew , sizeof ( real_T ) * 1 ) ; } { real_T xnew [ 1 ] ; xnew [ 0 ] = _rtP -> P_333 * _rtDW -> DiscreteStateSpace_DSTATE_l ; xnew [ 0 ] += _rtP -> P_334 * _rtB -> B_25_210_1688 ; ( void ) memcpy ( & _rtDW -> DiscreteStateSpace_DSTATE_l , xnew , sizeof ( real_T ) * 1 ) ; } _rtDW -> position_DSTATE += _rtP -> P_338 * _rtB -> B_25_215_1728 ; if ( _rtDW -> position_DSTATE > _rtP -> P_340 ) { _rtDW -> position_DSTATE = _rtP -> P_340 ; } else if ( _rtDW -> position_DSTATE < _rtP -> P_341 ) { _rtDW -> position_DSTATE = _rtP -> P_341 ; } _rtDW -> Derivative_states = _rtDW -> Derivative_tmp ; _rtDW -> DiscreteTimeIntegrator_DSTATE_p += _rtP -> P_348 * _rtB -> B_25_213_1712 ; if ( _rtDW -> DiscreteTimeIntegrator_DSTATE_p > _rtP -> P_350 ) { _rtDW -> DiscreteTimeIntegrator_DSTATE_p = _rtP -> P_350 ; } else if ( _rtDW -> DiscreteTimeIntegrator_DSTATE_p < _rtP -> P_351 ) { _rtDW -> DiscreteTimeIntegrator_DSTATE_p = _rtP -> P_351 ; } { real_T xnew [ 1 ] ; xnew [ 0 ] = _rtP -> P_357 * _rtDW -> DiscreteStateSpace_DSTATE_o ; xnew [ 0 ] += _rtP -> P_358 * _rtB -> B_25_214_1720 ; ( void ) memcpy ( & _rtDW -> DiscreteStateSpace_DSTATE_o , xnew , sizeof ( real_T ) * 1 ) ; } _rtDW -> position_DSTATE_g += _rtP -> P_365 * _rtB -> B_25_216_1736 ; _rtDW -> voltages_DSTATE [ 0 ] = _rtB -> B_25_182_1464 ; _rtDW -> voltages_DSTATE [ 1 ] = _rtB -> B_25_183_1472 ; _rtDW -> voltages_DSTATE [ 2 ] = _rtB -> B_25_217_1744 ; _rtDW -> voltages_DSTATE [ 3 ] = _rtB -> B_25_364_2920 [ 0 ] ; _rtDW -> voltages_DSTATE [ 4 ] = _rtB -> B_25_364_2920 [ 1 ] ; _rtDW -> Rotorspeeddeviationdw_SYSTEM_ENABLE = 0U ; _rtDW -> Rotorspeeddeviationdw_DSTATE = _rtP -> P_376 * _rtB -> B_25_223_1792 + _rtB -> B_25_224_1800 ; _rtDW -> theta_DSTATE += _rtP -> P_378 * _rtB -> B_25_226_1816 ; } UNUSED_PARAMETER ( tid ) ; }
#define MDL_UPDATE
static void mdlUpdateTID5 ( SimStruct * S , int_T tid ) { UNUSED_PARAMETER ( tid
) ; }
#define MDL_DERIVATIVES
static void mdlDerivatives ( SimStruct * S ) { B_Micro_Grid_Mains_ON_T * _rtB
; DW_Micro_Grid_Mains_ON_T * _rtDW ; P_Micro_Grid_Mains_ON_T * _rtP ;
XDis_Micro_Grid_Mains_ON_T * _rtXdis ; XDot_Micro_Grid_Mains_ON_T * _rtXdot ;
X_Micro_Grid_Mains_ON_T * _rtX ; _rtDW = ( ( DW_Micro_Grid_Mains_ON_T * )
ssGetRootDWork ( S ) ) ; _rtXdis = ( ( XDis_Micro_Grid_Mains_ON_T * )
ssGetContStateDisabled ( S ) ) ; _rtXdot = ( ( XDot_Micro_Grid_Mains_ON_T * )
ssGetdX ( S ) ) ; _rtX = ( ( X_Micro_Grid_Mains_ON_T * ) ssGetContStates ( S
) ) ; _rtP = ( ( P_Micro_Grid_Mains_ON_T * ) ssGetModelRtp ( S ) ) ; _rtB = ( ( B_Micro_Grid_Mains_ON_T * ) _ssGetModelBlockIO ( S ) ) ; if ( _rtXdis -> Integrator_CSTATE ) { _rtXdot -> Integrator_CSTATE = 0.0 ; } else { _rtXdot -> Integrator_CSTATE = _rtB -> B_25_124_1000 ; } _rtXdot -> Integrator_CSTATE_d = _rtB -> B_25_110_888 ; _rtXdot -> Integrator_CSTATE_p = _rtB -> B_25_111_896 ; if ( _rtDW -> AutomaticGainControl_MODE ) { { real_T instantDelay ; instantDelay = _rtB -> B_15_395_3168 ; if ( instantDelay > _rtP -> P_34 ) { instantDelay = _rtP -> P_34 ; } if ( instantDelay < 0.0 ) { _rtXdot -> VariableTransportDelay_CSTATE_m = 0 ; } else { _rtXdot -> VariableTransportDelay_CSTATE_m = 1.0 / instantDelay ; } } _rtXdot -> integrator_CSTATE_c = _rtB -> B_15_404_3240 [ 0 ] ; { real_T instantDelay ; instantDelay = _rtB -> B_15_397_3184 ; if ( instantDelay > _rtP -> P_37 ) { instantDelay = _rtP -> P_37 ; } if ( instantDelay < 0.0 ) { _rtXdot -> VariableTransportDelay_CSTATE_a = 0 ; } else { _rtXdot -> VariableTransportDelay_CSTATE_a = 1.0 / instantDelay ; } } _rtXdot -> integrator_CSTATE_g = _rtB -> B_15_404_3240 [ 1 ] ; } else { { real_T * dx ; int_T i1 ; dx = & ( ( ( XDot_Micro_Grid_Mains_ON_T * ) ssGetdX ( S ) ) -> VariableTransportDelay_CSTATE_m ) ; for ( i1 = 0 ; i1 < 4 ; i1 ++ ) { dx [ i1 ] = 0.0 ; } } } if ( _rtXdis -> Integrator_CSTATE_m ) { _rtXdot -> Integrator_CSTATE_m = 0.0 ; } else { _rtXdot -> Integrator_CSTATE_m = _rtB -> B_25_120_968 ; } { real_T instantDelay ; instantDelay = _rtB -> B_25_141_1136 ; if ( instantDelay > _rtP -> P_202 ) { instantDelay = _rtP -> P_202 ; } if ( instantDelay < 0.0 ) { _rtXdot -> VariableTransportDelay_CSTATE = 0 ; } else { _rtXdot -> VariableTransportDelay_CSTATE = 1.0 / instantDelay ; } } _rtXdot -> integrator_CSTATE = _rtB -> B_25_148_1192 [ 1 ] ; _rtXdot -> TransferFcn_CSTATE = 0.0 ; _rtXdot -> TransferFcn_CSTATE += _rtP -> P_208 * _rtX -> TransferFcn_CSTATE ; _rtXdot -> TransferFcn_CSTATE += _rtB -> B_25_121_976 ; _rtXdot -> Integrator_x1_CSTATE = _rtB -> B_25_136_1096 ; _rtXdot -> Integrator_x2_CSTATE = _rtB -> B_25_138_1112 ; }
#define MDL_ZERO_CROSSINGS
static void mdlZeroCrossings ( SimStruct * S ) { B_Micro_Grid_Mains_ON_T *
_rtB ; DW_Micro_Grid_Mains_ON_T * _rtDW ; P_Micro_Grid_Mains_ON_T * _rtP ;
X_Micro_Grid_Mains_ON_T * _rtX ; ZCV_Micro_Grid_Mains_ON_T * _rtZCSV ; _rtDW
= ( ( DW_Micro_Grid_Mains_ON_T * ) ssGetRootDWork ( S ) ) ; _rtZCSV = ( ( ZCV_Micro_Grid_Mains_ON_T * ) ssGetSolverZcSignalVector ( S ) ) ; _rtX = ( ( X_Micro_Grid_Mains_ON_T * ) ssGetContStates ( S ) ) ; _rtP = ( ( P_Micro_Grid_Mains_ON_T * ) ssGetModelRtp ( S ) ) ; _rtB = ( ( B_Micro_Grid_Mains_ON_T * ) _ssGetModelBlockIO ( S ) ) ; _rtZCSV -> RelationalOperator_RelopInput_ZC = _rtX -> Integrator_CSTATE - _rtB -> B_25_230_1848 ; switch ( _rtDW -> Integrator_MODE ) { case 1 : _rtZCSV -> Integrator_xUpperSaturation_ZC = 0.0 ; _rtZCSV -> Integrator_xLowerSaturation_ZC = _rtP -> P_179 - _rtP -> P_180 ; break ; case 2 : _rtZCSV -> Integrator_xUpperSaturation_ZC = _rtP -> P_180 - _rtP -> P_179 ; _rtZCSV -> Integrator_xLowerSaturation_ZC = 0.0 ; break ; default : _rtZCSV -> Integrator_xUpperSaturation_ZC = _rtX -> Integrator_CSTATE - _rtP -> P_179 ; _rtZCSV -> Integrator_xLowerSaturation_ZC = _rtX -> Integrator_CSTATE - _rtP -> P_180 ; break ; } if ( ( _rtDW -> Integrator_MODE == 3 ) || ( _rtDW -> Integrator_MODE == 4 ) ) { _rtZCSV -> Integrator_InputPortSignal_ZC = _rtB -> B_25_124_1000 ; } else { _rtZCSV -> Integrator_InputPortSignal_ZC = 0.0 ; } _rtZCSV -> HitCrossing_HitNoOutput_ZC = _rtB -> B_25_94_760 - _rtP -> P_197 ; if ( _rtDW -> AutomaticGainControl_MODE ) { _rtZCSV -> RelationalOperator_RelopInput_ZC_j = _rtB -> B_15_385_3088 - _rtB -> B_15_406_3256 ; _rtZCSV -> RelationalOperator_RelopInput_ZC_b = _rtB -> B_15_389_3120 - _rtB -> B_15_408_3272 ; _rtZCSV -> Saturation_UprLim_ZC = _rtB -> B_15_391_3136 - _rtP -> P_40 ; _rtZCSV -> Saturation_LwrLim_ZC = _rtB -> B_15_391_3136 - _rtP -> P_41 ; } else { { real_T * zcsv = & ( ( ( ZCV_Micro_Grid_Mains_ON_T * ) ssGetSolverZcSignalVector ( S ) ) -> RelationalOperator_RelopInput_ZC_j ) ; int_T i ; for ( i = 0 ; i < 4 ; i ++ ) { zcsv [ i ] = 0.0 ; } } } switch ( _rtDW -> Integrator_MODE_p ) { case 1 : _rtZCSV -> Integrator_xUpperSaturation_ZC_m = 0.0 ; _rtZCSV -> Integrator_xLowerSaturation_ZC_b = _rtP -> P_200 - _rtP -> P_201 ; break ; case 2 : _rtZCSV -> Integrator_xUpperSaturation_ZC_m = _rtP -> P_201 - _rtP -> P_200 ; _rtZCSV -> Integrator_xLowerSaturation_ZC_b = 0.0 ; break ; default : _rtZCSV -> Integrator_xUpperSaturation_ZC_m = _rtX -> Integrator_CSTATE_m - _rtP -> P_200 ; _rtZCSV -> Integrator_xLowerSaturation_ZC_b = _rtX -> Integrator_CSTATE_m - _rtP -> P_201 ; break ; } if ( ( _rtDW -> Integrator_MODE_p == 3 ) || ( _rtDW -> Integrator_MODE_p == 4 ) ) { _rtZCSV -> Integrator_InputPortSignal_ZC_d = _rtB -> B_25_120_968 ; } else { _rtZCSV -> Integrator_InputPortSignal_ZC_d = 0.0 ; } _rtZCSV -> RelationalOperator_RelopInput_ZC_l = _rtB -> B_25_116_936 - _rtB -> B_25_231_1856 ; _rtZCSV -> Saturation2_UprLim_ZC = _rtB -> B_25_123_992 - _rtP -> P_211 ; _rtZCSV -> Saturation2_LwrLim_ZC = _rtB -> B_25_123_992 - _rtP -> P_212 ; _rtZCSV -> RelationalOperator2_RelopInput_ZC [ 0 ] = _rtB -> B_25_107_864 [ 0 ] - _rtB -> B_25_153_1232 ; _rtZCSV -> RelationalOperator2_RelopInput_ZC [ 1 ] = _rtB -> B_25_107_864 [ 1 ] - _rtB -> B_25_153_1232 ; _rtZCSV -> RelationalOperator2_RelopInput_ZC [ 2 ] = _rtB -> B_25_107_864 [ 2 ] - _rtB -> B_25_153_1232 ; } static void mdlInitializeSizes ( SimStruct * S ) { ssSetChecksumVal ( S , 0 , 681756566U ) ; ssSetChecksumVal ( S , 1 , 1213967906U ) ; ssSetChecksumVal ( S , 2 , 1379610434U ) ; ssSetChecksumVal ( S , 3 , 2139498173U ) ; { mxArray * slVerStructMat = ( NULL ) ; mxArray * slStrMat = mxCreateString ( "simulink" ) ; char slVerChar [ 10 ] ; int status = mexCallMATLAB ( 1 , & slVerStructMat , 1 , & slStrMat , "ver" ) ; if ( status == 0 ) { mxArray * slVerMat = mxGetField ( slVerStructMat , 0 , "Version" ) ; if ( slVerMat == ( NULL ) ) { status = 1 ; } else { status = mxGetString ( slVerMat , slVerChar , 10 ) ; } } mxDestroyArray ( slStrMat ) ; mxDestroyArray ( slVerStructMat ) ; if ( ( status == 1 ) || ( strcmp ( slVerChar , "24.2" ) != 0 ) ) { return ; } } ssSetOptions ( S , SS_OPTION_EXCEPTION_FREE_CODE ) ; if ( ssGetSizeofDWork ( S ) != ( SLSize ) sizeof ( DW_Micro_Grid_Mains_ON_T ) ) { static char msg [ 256 ] ; snprintf ( msg , 256 , "Unexpected error: Internal DWork sizes do " "not match for accelerator mex file (%ld vs %lu)." , ( signed long ) ssGetSizeofDWork ( S ) , ( unsigned long ) sizeof ( DW_Micro_Grid_Mains_ON_T ) ) ; ssSetErrorStatus ( S , msg ) ; } if ( ssGetSizeofGlobalBlockIO ( S ) != ( SLSize ) sizeof ( B_Micro_Grid_Mains_ON_T ) ) { static char msg [ 256 ] ; snprintf ( msg , 256 , "Unexpected error: Internal BlockIO sizes do " "not match for accelerator mex file (%ld vs %lu)." , ( signed long ) ssGetSizeofGlobalBlockIO ( S ) , ( unsigned long ) sizeof ( B_Micro_Grid_Mains_ON_T ) ) ; ssSetErrorStatus ( S , msg ) ; } { int ssSizeofParams ; ssGetSizeofParams ( S , & ssSizeofParams ) ; if ( ssSizeofParams != sizeof ( P_Micro_Grid_Mains_ON_T ) ) { static char msg [ 256 ] ; snprintf ( msg , 256 , "Unexpected error: Internal Parameters sizes do " "not match for accelerator mex file (%d vs %lu)." , ssSizeofParams , ( unsigned long ) sizeof ( P_Micro_Grid_Mains_ON_T ) ) ; ssSetErrorStatus ( S , msg ) ; } } _ssSetModelRtp ( S , ( real_T * ) & Micro_Grid_Mains_ON_rtDefaultP ) ; _ssSetConstBlockIO ( S , & Micro_Grid_Mains_ON_rtInvariant ) ; } static void mdlInitializeSampleTimes ( SimStruct * S ) { { SimStruct * childS ; SysOutputFcn * callSysFcns ; childS = ssGetSFunction ( S , 0 ) ; callSysFcns = ssGetCallSystemOutputFcnList ( childS ) ; callSysFcns [ 3 + 0 ] = ( SysOutputFcn ) ( NULL ) ; childS = ssGetSFunction ( S , 1 ) ; callSysFcns = ssGetCallSystemOutputFcnList ( childS ) ; callSysFcns [ 3 + 0 ] = ( SysOutputFcn ) ( NULL ) ; } slAccRegPrmChangeFcn ( S , mdlOutputsTID5 ) ; } static void mdlTerminate ( SimStruct * S ) { }
#include "simulink.c"
